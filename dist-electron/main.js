"use strict";const P=require("electron"),tr=require("path"),rr=require("fs"),Za=require("https"),Ha=require("stream"),zf=require("events"),Bf=require("buffer"),ji=require("util"),Uf=require("better-sqlite3"),$f=require("crypto"),Pf=require("child_process");function Wi(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const i=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,i.get?i:{enumerable:!0,get:()=>e[t]})}}return r.default=e,Object.freeze(r)}const Re=Wi(tr),cn=Wi(rr),qa=Wi(Za);var le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fe={},Xa={},Ga={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.changePermissions=e.downloadFile=e.getPath=void 0;const r=P,t=rr,i=tr,n=Za,a=()=>{const s=r.app.getPath("userData");return i.resolve(`${s}/extensions`)};e.getPath=a;const o=r.net?r.net.request:n.get,f=(s,l)=>new Promise((g,u)=>{const c=o(s);c.on("response",v=>{if(v.statusCode&&v.statusCode>=300&&v.statusCode<400&&v.headers.location)return(0,e.downloadFile)(v.headers.location,l).then(g).catch(u);v.pipe(t.createWriteStream(l)).on("close",g),v.on("error",u)}),c.on("error",u),c.end()});e.downloadFile=f;const d=(s,l)=>{t.readdirSync(s).forEach(u=>{const c=i.join(s,u);t.chmodSync(c,parseInt(`${l}`,8)),t.statSync(c).isDirectory()&&(0,e.changePermissions)(c,l)})};e.changePermissions=d})(Ga);var At={},Kr={},oe={},ur={exports:{}},cr={exports:{}},hn;function Fr(){if(hn)return cr.exports;hn=1,typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?cr.exports={nextTick:e}:cr.exports=process;function e(r,t,i,n){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,o,f;switch(a){case 0:case 1:return process.nextTick(r);case 2:return process.nextTick(function(){r.call(null,t)});case 3:return process.nextTick(function(){r.call(null,t,i)});case 4:return process.nextTick(function(){r.call(null,t,i,n)});default:for(o=new Array(a-1),f=0;f<o.length;)o[f++]=arguments[f];return process.nextTick(function(){r.apply(null,o)})}}return cr.exports}var Vr,pn;function jf(){if(pn)return Vr;pn=1;var e={}.toString;return Vr=Array.isArray||function(r){return e.call(r)=="[object Array]"},Vr}var Jr,xn;function Ya(){return xn||(xn=1,Jr=Ha),Jr}var hr={exports:{}},vn;function zr(){return vn||(vn=1,function(e,r){var t=Bf,i=t.Buffer;function n(o,f){for(var d in o)f[d]=o[d]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=t:(n(t,r),r.Buffer=a);function a(o,f,d){return i(o,f,d)}n(i,a),a.from=function(o,f,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,f,d)},a.alloc=function(o,f,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var s=i(o);return f!==void 0?typeof d=="string"?s.fill(f,d):s.fill(f):s.fill(0),s},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}}(hr,hr.exports)),hr.exports}var ue={},_n;function ir(){if(_n)return ue;_n=1;function e(b){return Array.isArray?Array.isArray(b):v(b)==="[object Array]"}ue.isArray=e;function r(b){return typeof b=="boolean"}ue.isBoolean=r;function t(b){return b===null}ue.isNull=t;function i(b){return b==null}ue.isNullOrUndefined=i;function n(b){return typeof b=="number"}ue.isNumber=n;function a(b){return typeof b=="string"}ue.isString=a;function o(b){return typeof b=="symbol"}ue.isSymbol=o;function f(b){return b===void 0}ue.isUndefined=f;function d(b){return v(b)==="[object RegExp]"}ue.isRegExp=d;function s(b){return typeof b=="object"&&b!==null}ue.isObject=s;function l(b){return v(b)==="[object Date]"}ue.isDate=l;function g(b){return v(b)==="[object Error]"||b instanceof Error}ue.isError=g;function u(b){return typeof b=="function"}ue.isFunction=u;function c(b){return b===null||typeof b=="boolean"||typeof b=="number"||typeof b=="string"||typeof b=="symbol"||typeof b>"u"}ue.isPrimitive=c,ue.isBuffer=Buffer.isBuffer;function v(b){return Object.prototype.toString.call(b)}return ue}var pr={exports:{}},xr={exports:{}},bn;function Wf(){return bn||(bn=1,typeof Object.create=="function"?xr.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:xr.exports=function(r,t){if(t){r.super_=t;var i=function(){};i.prototype=t.prototype,r.prototype=new i,r.prototype.constructor=r}}),xr.exports}var gn;function nr(){if(gn)return pr.exports;gn=1;try{var e=require("util");if(typeof e.inherits!="function")throw"";pr.exports=e.inherits}catch{pr.exports=Wf()}return pr.exports}var Qr={exports:{}},mn;function Zf(){return mn||(mn=1,function(e){function r(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}var t=zr().Buffer,i=ji;function n(a,o,f){a.copy(o,f)}e.exports=function(){function a(){r(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(f){var d={data:f,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length},a.prototype.unshift=function(f){var d={data:f,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length},a.prototype.shift=function(){if(this.length!==0){var f=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,f}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(f){if(this.length===0)return"";for(var d=this.head,s=""+d.data;d=d.next;)s+=f+d.data;return s},a.prototype.concat=function(f){if(this.length===0)return t.alloc(0);for(var d=t.allocUnsafe(f>>>0),s=this.head,l=0;s;)n(s.data,d,l),l+=s.data.length,s=s.next;return d},a}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var a=i.inspect({length:this.length});return this.constructor.name+" "+a})}(Qr)),Qr.exports}var ei,wn;function Ka(){if(wn)return ei;wn=1;var e=Fr();function r(n,a){var o=this,f=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return f||d?(a?a(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,n)):e.nextTick(i,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(s){!a&&s?o._writableState?o._writableState.errorEmitted||(o._writableState.errorEmitted=!0,e.nextTick(i,o,s)):e.nextTick(i,o,s):a&&a(s)}),this)}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(n,a){n.emit("error",a)}return ei={destroy:r,undestroy:t},ei}var ti,yn;function Hf(){return yn||(yn=1,ti=ji.deprecate),ti}var ri,En;function Va(){if(En)return ri;En=1;var e=Fr();ri=b;function r(y){var w=this;this.next=null,this.entry=null,this.finish=function(){Ze(w,y)}}var t=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:e.nextTick,i;b.WritableState=c;var n=Object.create(ir());n.inherits=nr();var a={deprecate:Hf()},o=Ya(),f=zr().Buffer,d=(typeof le<"u"?le:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(y){return f.from(y)}function l(y){return f.isBuffer(y)||y instanceof d}var g=Ka();n.inherits(b,o);function u(){}function c(y,w){i=i||Ct(),y=y||{};var A=w instanceof i;this.objectMode=!!y.objectMode,A&&(this.objectMode=this.objectMode||!!y.writableObjectMode);var U=y.highWaterMark,H=y.writableHighWaterMark,Y=this.objectMode?16:16*1024;U||U===0?this.highWaterMark=U:A&&(H||H===0)?this.highWaterMark=H:this.highWaterMark=Y,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=y.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(xe){M(w,xe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}c.prototype.getBuffer=function(){for(var w=this.bufferedRequest,A=[];w;)A.push(w),w=w.next;return A},function(){try{Object.defineProperty(c.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var v;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(y){return v.call(this,y)?!0:this!==b?!1:y&&y._writableState instanceof c}})):v=function(y){return y instanceof this};function b(y){if(i=i||Ct(),!v.call(b,this)&&!(this instanceof i))return new b(y);this._writableState=new c(y,this),this.writable=!0,y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final)),o.call(this)}b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function k(y,w){var A=new Error("write after end");y.emit("error",A),e.nextTick(w,A)}function h(y,w,A,U){var H=!0,Y=!1;return A===null?Y=new TypeError("May not write null values to stream"):typeof A!="string"&&A!==void 0&&!w.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y&&(y.emit("error",Y),e.nextTick(U,Y),H=!1),H}b.prototype.write=function(y,w,A){var U=this._writableState,H=!1,Y=!U.objectMode&&l(y);return Y&&!f.isBuffer(y)&&(y=s(y)),typeof w=="function"&&(A=w,w=null),Y?w="buffer":w||(w=U.defaultEncoding),typeof A!="function"&&(A=u),U.ended?k(this,A):(Y||h(this,U,y,A))&&(U.pendingcb++,H=m(this,U,Y,y,w,A)),H},b.prototype.cork=function(){var y=this._writableState;y.corked++},b.prototype.uncork=function(){var y=this._writableState;y.corked&&(y.corked--,!y.writing&&!y.corked&&!y.bufferProcessing&&y.bufferedRequest&&W(this,y))},b.prototype.setDefaultEncoding=function(w){if(typeof w=="string"&&(w=w.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((w+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+w);return this._writableState.defaultEncoding=w,this};function _(y,w,A){return!y.objectMode&&y.decodeStrings!==!1&&typeof w=="string"&&(w=f.from(w,A)),w}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m(y,w,A,U,H,Y){if(!A){var ne=_(w,U,H);U!==ne&&(A=!0,H="buffer",U=ne)}var xe=w.objectMode?1:U.length;w.length+=xe;var Ne=w.length<w.highWaterMark;if(Ne||(w.needDrain=!0),w.writing||w.corked){var he=w.lastBufferedRequest;w.lastBufferedRequest={chunk:U,encoding:H,isBuf:A,callback:Y,next:null},he?he.next=w.lastBufferedRequest:w.bufferedRequest=w.lastBufferedRequest,w.bufferedRequestCount+=1}else T(y,w,!1,xe,U,H,Y);return Ne}function T(y,w,A,U,H,Y,ne){w.writelen=U,w.writecb=ne,w.writing=!0,w.sync=!0,A?y._writev(H,w.onwrite):y._write(H,Y,w.onwrite),w.sync=!1}function S(y,w,A,U,H){--w.pendingcb,A?(e.nextTick(H,U),e.nextTick(Z,y,w),y._writableState.errorEmitted=!0,y.emit("error",U)):(H(U),y._writableState.errorEmitted=!0,y.emit("error",U),Z(y,w))}function L(y){y.writing=!1,y.writecb=null,y.length-=y.writelen,y.writelen=0}function M(y,w){var A=y._writableState,U=A.sync,H=A.writecb;if(L(A),w)S(y,A,U,w,H);else{var Y=I(A);!Y&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&W(y,A),U?t(D,y,A,Y,H):D(y,A,Y,H)}}function D(y,w,A,U){A||z(y,w),w.pendingcb--,U(),Z(y,w)}function z(y,w){w.length===0&&w.needDrain&&(w.needDrain=!1,y.emit("drain"))}function W(y,w){w.bufferProcessing=!0;var A=w.bufferedRequest;if(y._writev&&A&&A.next){var U=w.bufferedRequestCount,H=new Array(U),Y=w.corkedRequestsFree;Y.entry=A;for(var ne=0,xe=!0;A;)H[ne]=A,A.isBuf||(xe=!1),A=A.next,ne+=1;H.allBuffers=xe,T(y,w,!0,w.length,H,"",Y.finish),w.pendingcb++,w.lastBufferedRequest=null,Y.next?(w.corkedRequestsFree=Y.next,Y.next=null):w.corkedRequestsFree=new r(w),w.bufferedRequestCount=0}else{for(;A;){var Ne=A.chunk,he=A.encoding,p=A.callback,x=w.objectMode?1:Ne.length;if(T(y,w,!1,x,Ne,he,p),A=A.next,w.bufferedRequestCount--,w.writing)break}A===null&&(w.lastBufferedRequest=null)}w.bufferedRequest=A,w.bufferProcessing=!1}b.prototype._write=function(y,w,A){A(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(y,w,A){var U=this._writableState;typeof y=="function"?(A=y,y=null,w=null):typeof w=="function"&&(A=w,w=null),y!=null&&this.write(y,w),U.corked&&(U.corked=1,this.uncork()),U.ending||Ue(this,U,A)};function I(y){return y.ending&&y.length===0&&y.bufferedRequest===null&&!y.finished&&!y.writing}function Q(y,w){y._final(function(A){w.pendingcb--,A&&y.emit("error",A),w.prefinished=!0,y.emit("prefinish"),Z(y,w)})}function de(y,w){!w.prefinished&&!w.finalCalled&&(typeof y._final=="function"?(w.pendingcb++,w.finalCalled=!0,e.nextTick(Q,y,w)):(w.prefinished=!0,y.emit("prefinish")))}function Z(y,w){var A=I(w);return A&&(de(y,w),w.pendingcb===0&&(w.finished=!0,y.emit("finish"))),A}function Ue(y,w,A){w.ending=!0,Z(y,w),A&&(w.finished?e.nextTick(A):y.once("finish",A)),w.ended=!0,y.writable=!1}function Ze(y,w,A){var U=y.entry;for(y.entry=null;U;){var H=U.callback;w.pendingcb--,H(A),U=U.next}w.corkedRequestsFree.next=y}return Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(y){this._writableState&&(this._writableState.destroyed=y)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(y,w){this.end(),w(y)},ri}var ii,Tn;function Ct(){if(Tn)return ii;Tn=1;var e=Fr(),r=Object.keys||function(g){var u=[];for(var c in g)u.push(c);return u};ii=d;var t=Object.create(ir());t.inherits=nr();var i=Ja(),n=Va();t.inherits(d,i);for(var a=r(n.prototype),o=0;o<a.length;o++){var f=a[o];d.prototype[f]||(d.prototype[f]=n.prototype[f])}function d(g){if(!(this instanceof d))return new d(g);i.call(this,g),n.call(this,g),g&&g.readable===!1&&(this.readable=!1),g&&g.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,g&&g.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",s)}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function s(){this.allowHalfOpen||this._writableState.ended||e.nextTick(l,this)}function l(g){g.end()}return Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),d.prototype._destroy=function(g,u){this.push(null),this.end(),e.nextTick(u,g)},ii}var ni={},Sn;function kn(){if(Sn)return ni;Sn=1;var e=zr().Buffer,r=e.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(h){if(!h)return"utf8";for(var _;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(_)return;h=(""+h).toLowerCase(),_=!0}}function i(h){var _=t(h);if(typeof _!="string"&&(e.isEncoding===r||!r(h)))throw new Error("Unknown encoding: "+h);return _||h}ni.StringDecoder=n;function n(h){this.encoding=i(h);var _;switch(this.encoding){case"utf16le":this.text=g,this.end=u,_=4;break;case"utf8":this.fillLast=d,_=4;break;case"base64":this.text=c,this.end=v,_=3;break;default:this.write=b,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}n.prototype.write=function(h){if(h.length===0)return"";var _,m;if(this.lastNeed){if(_=this.fillLast(h),_===void 0)return"";m=this.lastNeed,this.lastNeed=0}else m=0;return m<h.length?_?_+this.text(h,m):this.text(h,m):_||""},n.prototype.end=l,n.prototype.text=s,n.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function a(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function o(h,_,m){var T=_.length-1;if(T<m)return 0;var S=a(_[T]);return S>=0?(S>0&&(h.lastNeed=S-1),S):--T<m||S===-2?0:(S=a(_[T]),S>=0?(S>0&&(h.lastNeed=S-2),S):--T<m||S===-2?0:(S=a(_[T]),S>=0?(S>0&&(S===2?S=0:h.lastNeed=S-3),S):0))}function f(h,_,m){if((_[0]&192)!==128)return h.lastNeed=0,"�";if(h.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return h.lastNeed=1,"�";if(h.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return h.lastNeed=2,"�"}}function d(h){var _=this.lastTotal-this.lastNeed,m=f(this,h);if(m!==void 0)return m;if(this.lastNeed<=h.length)return h.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,_,0,h.length),this.lastNeed-=h.length}function s(h,_){var m=o(this,h,_);if(!this.lastNeed)return h.toString("utf8",_);this.lastTotal=m;var T=h.length-(m-this.lastNeed);return h.copy(this.lastChar,0,T),h.toString("utf8",_,T)}function l(h){var _=h&&h.length?this.write(h):"";return this.lastNeed?_+"�":_}function g(h,_){if((h.length-_)%2===0){var m=h.toString("utf16le",_);if(m){var T=m.charCodeAt(m.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],m.slice(0,-1)}return m}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",_,h.length-1)}function u(h){var _=h&&h.length?this.write(h):"";if(this.lastNeed){var m=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,m)}return _}function c(h,_){var m=(h.length-_)%3;return m===0?h.toString("base64",_):(this.lastNeed=3-m,this.lastTotal=3,m===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",_,h.length-m))}function v(h){var _=h&&h.length?this.write(h):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(h){return h.toString(this.encoding)}function k(h){return h&&h.length?this.write(h):""}return ni}var ai,Rn;function Ja(){if(Rn)return ai;Rn=1;var e=Fr();ai=_;var r=jf(),t;_.ReadableState=h,zf.EventEmitter;var i=function(p,x){return p.listeners(x).length},n=Ya(),a=zr().Buffer,o=(typeof le<"u"?le:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(p){return a.from(p)}function d(p){return a.isBuffer(p)||p instanceof o}var s=Object.create(ir());s.inherits=nr();var l=ji,g=void 0;l&&l.debuglog?g=l.debuglog("stream"):g=function(){};var u=Zf(),c=Ka(),v;s.inherits(_,n);var b=["error","close","destroy","pause","resume"];function k(p,x,C){if(typeof p.prependListener=="function")return p.prependListener(x,C);!p._events||!p._events[x]?p.on(x,C):r(p._events[x])?p._events[x].unshift(C):p._events[x]=[C,p._events[x]]}function h(p,x){t=t||Ct(),p=p||{};var C=x instanceof t;this.objectMode=!!p.objectMode,C&&(this.objectMode=this.objectMode||!!p.readableObjectMode);var N=p.highWaterMark,q=p.readableHighWaterMark,B=this.objectMode?16:16*1024;N||N===0?this.highWaterMark=N:C&&(q||q===0)?this.highWaterMark=q:this.highWaterMark=B,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=p.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,p.encoding&&(v||(v=kn().StringDecoder),this.decoder=new v(p.encoding),this.encoding=p.encoding)}function _(p){if(t=t||Ct(),!(this instanceof _))return new _(p);this._readableState=new h(p,this),this.readable=!0,p&&(typeof p.read=="function"&&(this._read=p.read),typeof p.destroy=="function"&&(this._destroy=p.destroy)),n.call(this)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(p){this._readableState&&(this._readableState.destroyed=p)}}),_.prototype.destroy=c.destroy,_.prototype._undestroy=c.undestroy,_.prototype._destroy=function(p,x){this.push(null),x(p)},_.prototype.push=function(p,x){var C=this._readableState,N;return C.objectMode?N=!0:typeof p=="string"&&(x=x||C.defaultEncoding,x!==C.encoding&&(p=a.from(p,x),x=""),N=!0),m(this,p,x,!1,N)},_.prototype.unshift=function(p){return m(this,p,null,!0,!1)};function m(p,x,C,N,q){var B=p._readableState;if(x===null)B.reading=!1,W(p,B);else{var j;q||(j=S(B,x)),j?p.emit("error",j):B.objectMode||x&&x.length>0?(typeof x!="string"&&!B.objectMode&&Object.getPrototypeOf(x)!==a.prototype&&(x=f(x)),N?B.endEmitted?p.emit("error",new Error("stream.unshift() after end event")):T(p,B,x,!0):B.ended?p.emit("error",new Error("stream.push() after EOF")):(B.reading=!1,B.decoder&&!C?(x=B.decoder.write(x),B.objectMode||x.length!==0?T(p,B,x,!1):de(p,B)):T(p,B,x,!1))):N||(B.reading=!1)}return L(B)}function T(p,x,C,N){x.flowing&&x.length===0&&!x.sync?(p.emit("data",C),p.read(0)):(x.length+=x.objectMode?1:C.length,N?x.buffer.unshift(C):x.buffer.push(C),x.needReadable&&I(p)),de(p,x)}function S(p,x){var C;return!d(x)&&typeof x!="string"&&x!==void 0&&!p.objectMode&&(C=new TypeError("Invalid non-string/buffer chunk")),C}function L(p){return!p.ended&&(p.needReadable||p.length<p.highWaterMark||p.length===0)}_.prototype.isPaused=function(){return this._readableState.flowing===!1},_.prototype.setEncoding=function(p){return v||(v=kn().StringDecoder),this._readableState.decoder=new v(p),this._readableState.encoding=p,this};var M=8388608;function D(p){return p>=M?p=M:(p--,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p++),p}function z(p,x){return p<=0||x.length===0&&x.ended?0:x.objectMode?1:p!==p?x.flowing&&x.length?x.buffer.head.data.length:x.length:(p>x.highWaterMark&&(x.highWaterMark=D(p)),p<=x.length?p:x.ended?x.length:(x.needReadable=!0,0))}_.prototype.read=function(p){g("read",p),p=parseInt(p,10);var x=this._readableState,C=p;if(p!==0&&(x.emittedReadable=!1),p===0&&x.needReadable&&(x.length>=x.highWaterMark||x.ended))return g("read: emitReadable",x.length,x.ended),x.length===0&&x.ended?xe(this):I(this),null;if(p=z(p,x),p===0&&x.ended)return x.length===0&&xe(this),null;var N=x.needReadable;g("need readable",N),(x.length===0||x.length-p<x.highWaterMark)&&(N=!0,g("length less than watermark",N)),x.ended||x.reading?(N=!1,g("reading or ended",N)):N&&(g("do read"),x.reading=!0,x.sync=!0,x.length===0&&(x.needReadable=!0),this._read(x.highWaterMark),x.sync=!1,x.reading||(p=z(C,x)));var q;return p>0?q=U(p,x):q=null,q===null?(x.needReadable=!0,p=0):x.length-=p,x.length===0&&(x.ended||(x.needReadable=!0),C!==p&&x.ended&&xe(this)),q!==null&&this.emit("data",q),q};function W(p,x){if(!x.ended){if(x.decoder){var C=x.decoder.end();C&&C.length&&(x.buffer.push(C),x.length+=x.objectMode?1:C.length)}x.ended=!0,I(p)}}function I(p){var x=p._readableState;x.needReadable=!1,x.emittedReadable||(g("emitReadable",x.flowing),x.emittedReadable=!0,x.sync?e.nextTick(Q,p):Q(p))}function Q(p){g("emit readable"),p.emit("readable"),A(p)}function de(p,x){x.readingMore||(x.readingMore=!0,e.nextTick(Z,p,x))}function Z(p,x){for(var C=x.length;!x.reading&&!x.flowing&&!x.ended&&x.length<x.highWaterMark&&(g("maybeReadMore read 0"),p.read(0),C!==x.length);)C=x.length;x.readingMore=!1}_.prototype._read=function(p){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(p,x){var C=this,N=this._readableState;switch(N.pipesCount){case 0:N.pipes=p;break;case 1:N.pipes=[N.pipes,p];break;default:N.pipes.push(p);break}N.pipesCount+=1,g("pipe count=%d opts=%j",N.pipesCount,x);var q=(!x||x.end!==!1)&&p!==process.stdout&&p!==process.stderr,B=q?pt:R;N.endEmitted?e.nextTick(B):C.once("end",B),p.on("unpipe",j);function j(O,F){g("onunpipe"),O===C&&F&&F.hasUnpiped===!1&&(F.hasUnpiped=!0,Yr())}function pt(){g("onend"),p.end()}var xt=Ue(C);p.on("drain",xt);var zt=!1;function Yr(){g("cleanup"),p.removeListener("close",vt),p.removeListener("finish",E),p.removeListener("drain",xt),p.removeListener("error",Bt),p.removeListener("unpipe",j),C.removeListener("end",pt),C.removeListener("end",R),C.removeListener("data",tt),zt=!0,N.awaitDrain&&(!p._writableState||p._writableState.needDrain)&&xt()}var ae=!1;C.on("data",tt);function tt(O){g("ondata"),ae=!1;var F=p.write(O);F===!1&&!ae&&((N.pipesCount===1&&N.pipes===p||N.pipesCount>1&&he(N.pipes,p)!==-1)&&!zt&&(g("false write response, pause",N.awaitDrain),N.awaitDrain++,ae=!0),C.pause())}function Bt(O){g("onerror",O),R(),p.removeListener("error",Bt),i(p,"error")===0&&p.emit("error",O)}k(p,"error",Bt);function vt(){p.removeListener("finish",E),R()}p.once("close",vt);function E(){g("onfinish"),p.removeListener("close",vt),R()}p.once("finish",E);function R(){g("unpipe"),C.unpipe(p)}return p.emit("pipe",C),N.flowing||(g("pipe resume"),C.resume()),p};function Ue(p){return function(){var x=p._readableState;g("pipeOnDrain",x.awaitDrain),x.awaitDrain&&x.awaitDrain--,x.awaitDrain===0&&i(p,"data")&&(x.flowing=!0,A(p))}}_.prototype.unpipe=function(p){var x=this._readableState,C={hasUnpiped:!1};if(x.pipesCount===0)return this;if(x.pipesCount===1)return p&&p!==x.pipes?this:(p||(p=x.pipes),x.pipes=null,x.pipesCount=0,x.flowing=!1,p&&p.emit("unpipe",this,C),this);if(!p){var N=x.pipes,q=x.pipesCount;x.pipes=null,x.pipesCount=0,x.flowing=!1;for(var B=0;B<q;B++)N[B].emit("unpipe",this,{hasUnpiped:!1});return this}var j=he(x.pipes,p);return j===-1?this:(x.pipes.splice(j,1),x.pipesCount-=1,x.pipesCount===1&&(x.pipes=x.pipes[0]),p.emit("unpipe",this,C),this)},_.prototype.on=function(p,x){var C=n.prototype.on.call(this,p,x);if(p==="data")this._readableState.flowing!==!1&&this.resume();else if(p==="readable"){var N=this._readableState;!N.endEmitted&&!N.readableListening&&(N.readableListening=N.needReadable=!0,N.emittedReadable=!1,N.reading?N.length&&I(this):e.nextTick(Ze,this))}return C},_.prototype.addListener=_.prototype.on;function Ze(p){g("readable nexttick read 0"),p.read(0)}_.prototype.resume=function(){var p=this._readableState;return p.flowing||(g("resume"),p.flowing=!0,y(this,p)),this};function y(p,x){x.resumeScheduled||(x.resumeScheduled=!0,e.nextTick(w,p,x))}function w(p,x){x.reading||(g("resume read 0"),p.read(0)),x.resumeScheduled=!1,x.awaitDrain=0,p.emit("resume"),A(p),x.flowing&&!x.reading&&p.read(0)}_.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function A(p){var x=p._readableState;for(g("flow",x.flowing);x.flowing&&p.read()!==null;);}_.prototype.wrap=function(p){var x=this,C=this._readableState,N=!1;p.on("end",function(){if(g("wrapped end"),C.decoder&&!C.ended){var j=C.decoder.end();j&&j.length&&x.push(j)}x.push(null)}),p.on("data",function(j){if(g("wrapped data"),C.decoder&&(j=C.decoder.write(j)),!(C.objectMode&&j==null)&&!(!C.objectMode&&(!j||!j.length))){var pt=x.push(j);pt||(N=!0,p.pause())}});for(var q in p)this[q]===void 0&&typeof p[q]=="function"&&(this[q]=function(j){return function(){return p[j].apply(p,arguments)}}(q));for(var B=0;B<b.length;B++)p.on(b[B],this.emit.bind(this,b[B]));return this._read=function(j){g("wrapped _read",j),N&&(N=!1,p.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=U;function U(p,x){if(x.length===0)return null;var C;return x.objectMode?C=x.buffer.shift():!p||p>=x.length?(x.decoder?C=x.buffer.join(""):x.buffer.length===1?C=x.buffer.head.data:C=x.buffer.concat(x.length),x.buffer.clear()):C=H(p,x.buffer,x.decoder),C}function H(p,x,C){var N;return p<x.head.data.length?(N=x.head.data.slice(0,p),x.head.data=x.head.data.slice(p)):p===x.head.data.length?N=x.shift():N=C?Y(p,x):ne(p,x),N}function Y(p,x){var C=x.head,N=1,q=C.data;for(p-=q.length;C=C.next;){var B=C.data,j=p>B.length?B.length:p;if(j===B.length?q+=B:q+=B.slice(0,p),p-=j,p===0){j===B.length?(++N,C.next?x.head=C.next:x.head=x.tail=null):(x.head=C,C.data=B.slice(j));break}++N}return x.length-=N,q}function ne(p,x){var C=a.allocUnsafe(p),N=x.head,q=1;for(N.data.copy(C),p-=N.data.length;N=N.next;){var B=N.data,j=p>B.length?B.length:p;if(B.copy(C,C.length-p,0,j),p-=j,p===0){j===B.length?(++q,N.next?x.head=N.next:x.head=x.tail=null):(x.head=N,N.data=B.slice(j));break}++q}return x.length-=q,C}function xe(p){var x=p._readableState;if(x.length>0)throw new Error('"endReadable()" called on non-empty stream');x.endEmitted||(x.ended=!0,e.nextTick(Ne,x,p))}function Ne(p,x){!p.endEmitted&&p.length===0&&(p.endEmitted=!0,x.readable=!1,x.emit("end"))}function he(p,x){for(var C=0,N=p.length;C<N;C++)if(p[C]===x)return C;return-1}return ai}var oi,Cn;function Qa(){if(Cn)return oi;Cn=1,oi=i;var e=Ct(),r=Object.create(ir());r.inherits=nr(),r.inherits(i,e);function t(o,f){var d=this._transformState;d.transforming=!1;var s=d.writecb;if(!s)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,f!=null&&this.push(f),s(o);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function i(o){if(!(this instanceof i))return new i(o);e.call(this,o),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",n)}function n(){var o=this;typeof this._flush=="function"?this._flush(function(f,d){a(o,f,d)}):a(this,null,null)}i.prototype.push=function(o,f){return this._transformState.needTransform=!1,e.prototype.push.call(this,o,f)},i.prototype._transform=function(o,f,d){throw new Error("_transform() is not implemented")},i.prototype._write=function(o,f,d){var s=this._transformState;if(s.writecb=d,s.writechunk=o,s.writeencoding=f,!s.transforming){var l=this._readableState;(s.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},i.prototype._read=function(o){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},i.prototype._destroy=function(o,f){var d=this;e.prototype._destroy.call(this,o,function(s){f(s),d.emit("close")})};function a(o,f,d){if(f)return o.emit("error",f);if(d!=null&&o.push(d),o._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(o._transformState.transforming)throw new Error("Calling transform done when still transforming");return o.push(null)}return oi}var fi,An;function qf(){if(An)return fi;An=1,fi=t;var e=Qa(),r=Object.create(ir());r.inherits=nr(),r.inherits(t,e);function t(i){if(!(this instanceof t))return new t(i);e.call(this,i)}return t.prototype._transform=function(i,n,a){a(null,i)},fi}var On;function eo(){return On||(On=1,function(e,r){var t=Ha;process.env.READABLE_STREAM==="disable"&&t?(e.exports=t,r=e.exports=t.Readable,r.Readable=t.Readable,r.Writable=t.Writable,r.Duplex=t.Duplex,r.Transform=t.Transform,r.PassThrough=t.PassThrough,r.Stream=t):(r=e.exports=Ja(),r.Stream=t||r,r.Readable=r,r.Writable=Va(),r.Duplex=Ct(),r.Transform=Qa(),r.PassThrough=qf())}(ur,ur.exports)),ur.exports}var In,vr;oe.base64=!0;oe.array=!0;oe.string=!0;oe.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";oe.nodebuffer=typeof Buffer<"u";oe.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")vr=oe.blob=!1;else{var Nn=new ArrayBuffer(0);try{vr=oe.blob=new Blob([Nn],{type:"application/zip"}).size===0}catch{try{var Xf=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,Dn=new Xf;Dn.append(Nn),vr=oe.blob=Dn.getBlob("application/zip").size===0}catch{vr=oe.blob=!1}}}try{In=oe.nodestream=!!eo().Readable}catch{In=oe.nodestream=!1}var _r={},Ln;function to(){if(Ln)return _r;Ln=1;var e=re(),r=oe,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return _r.encode=function(i){for(var n=[],a,o,f,d,s,l,g,u=0,c=i.length,v=c,b=e.getTypeOf(i)!=="string";u<i.length;)v=c-u,b?(a=i[u++],o=u<c?i[u++]:0,f=u<c?i[u++]:0):(a=i.charCodeAt(u++),o=u<c?i.charCodeAt(u++):0,f=u<c?i.charCodeAt(u++):0),d=a>>2,s=(a&3)<<4|o>>4,l=v>1?(o&15)<<2|f>>6:64,g=v>2?f&63:64,n.push(t.charAt(d)+t.charAt(s)+t.charAt(l)+t.charAt(g));return n.join("")},_r.decode=function(i){var n,a,o,f,d,s,l,g=0,u=0,c="data:";if(i.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");i=i.replace(/[^A-Za-z0-9+/=]/g,"");var v=i.length*3/4;if(i.charAt(i.length-1)===t.charAt(64)&&v--,i.charAt(i.length-2)===t.charAt(64)&&v--,v%1!==0)throw new Error("Invalid base64 input, bad content length.");var b;for(r.uint8array?b=new Uint8Array(v|0):b=new Array(v|0);g<i.length;)f=t.indexOf(i.charAt(g++)),d=t.indexOf(i.charAt(g++)),s=t.indexOf(i.charAt(g++)),l=t.indexOf(i.charAt(g++)),n=f<<2|d>>4,a=(d&15)<<4|s>>2,o=(s&3)<<6|l,b[u++]=n,s!==64&&(b[u++]=a),l!==64&&(b[u++]=o);return b},_r}var Br={isNode:typeof Buffer<"u",newBufferFrom:function(e,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,r);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,r)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var r=new Buffer(e);return r.fill(0),r},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"}},si,Mn;function Gf(){if(Mn)return si;Mn=1;var e=le.MutationObserver||le.WebKitMutationObserver,r;if(process.browser)if(e){var t=0,i=new e(d),n=le.document.createTextNode("");i.observe(n,{characterData:!0}),r=function(){n.data=t=++t%2}}else if(!le.setImmediate&&typeof le.MessageChannel<"u"){var a=new le.MessageChannel;a.port1.onmessage=d,r=function(){a.port2.postMessage(0)}}else"document"in le&&"onreadystatechange"in le.document.createElement("script")?r=function(){var l=le.document.createElement("script");l.onreadystatechange=function(){d(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},le.document.documentElement.appendChild(l)}:r=function(){setTimeout(d,0)};else r=function(){process.nextTick(d)};var o,f=[];function d(){o=!0;for(var l,g,u=f.length;u;){for(g=f,f=[],l=-1;++l<u;)g[l]();u=f.length}o=!1}si=s;function s(l){f.push(l)===1&&!o&&r()}return si}var li,Fn;function Yf(){if(Fn)return li;Fn=1;var e=Gf();function r(){}var t={},i=["REJECTED"],n=["FULFILLED"],a=["PENDING"];if(!process.browser)var o=["UNHANDLED"];li=f;function f(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,process.browser||(this.handled=o),h!==r&&g(this,h)}f.prototype.finally=function(h){if(typeof h!="function")return this;var _=this.constructor;return this.then(m,T);function m(S){function L(){return S}return _.resolve(h()).then(L)}function T(S){function L(){throw S}return _.resolve(h()).then(L)}},f.prototype.catch=function(h){return this.then(null,h)},f.prototype.then=function(h,_){if(typeof h!="function"&&this.state===n||typeof _!="function"&&this.state===i)return this;var m=new this.constructor(r);if(process.browser||this.handled===o&&(this.handled=null),this.state!==a){var T=this.state===n?h:_;s(m,T,this.outcome)}else this.queue.push(new d(m,h,_));return m};function d(h,_,m){this.promise=h,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof m=="function"&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(h){t.resolve(this.promise,h)},d.prototype.otherCallFulfilled=function(h){s(this.promise,this.onFulfilled,h)},d.prototype.callRejected=function(h){t.reject(this.promise,h)},d.prototype.otherCallRejected=function(h){s(this.promise,this.onRejected,h)};function s(h,_,m){e(function(){var T;try{T=_(m)}catch(S){return t.reject(h,S)}T===h?t.reject(h,new TypeError("Cannot resolve promise with itself")):t.resolve(h,T)})}t.resolve=function(h,_){var m=u(l,_);if(m.status==="error")return t.reject(h,m.value);var T=m.value;if(T)g(h,T);else{h.state=n,h.outcome=_;for(var S=-1,L=h.queue.length;++S<L;)h.queue[S].callFulfilled(_)}return h},t.reject=function(h,_){h.state=i,h.outcome=_,process.browser||h.handled===o&&e(function(){h.handled===o&&process.emit("unhandledRejection",_,h)});for(var m=-1,T=h.queue.length;++m<T;)h.queue[m].callRejected(_);return h};function l(h){var _=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof _=="function")return function(){_.apply(h,arguments)}}function g(h,_){var m=!1;function T(D){m||(m=!0,t.reject(h,D))}function S(D){m||(m=!0,t.resolve(h,D))}function L(){_(S,T)}var M=u(L);M.status==="error"&&T(M.value)}function u(h,_){var m={};try{m.value=h(_),m.status="success"}catch(T){m.status="error",m.value=T}return m}f.resolve=c;function c(h){return h instanceof this?h:t.resolve(new this(r),h)}f.reject=v;function v(h){var _=new this(r);return t.reject(_,h)}f.all=b;function b(h){var _=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=h.length,T=!1;if(!m)return this.resolve([]);for(var S=new Array(m),L=0,M=-1,D=new this(r);++M<m;)z(h[M],M);return D;function z(W,I){_.resolve(W).then(Q,function(de){T||(T=!0,t.reject(D,de))});function Q(de){S[I]=de,++L===m&&!T&&(T=!0,t.resolve(D,S))}}}f.race=k;function k(h){var _=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var m=h.length,T=!1;if(!m)return this.resolve([]);for(var S=-1,L=new this(r);++S<m;)M(h[S]);return L;function M(D){_.resolve(D).then(function(z){T||(T=!0,t.resolve(L,z))},function(z){T||(T=!0,t.reject(L,z))})}}return li}var Oi=null;typeof Promise<"u"?Oi=Promise:Oi=Yf();var ar={Promise:Oi};(function(e,r){if(e.setImmediate)return;var t=1,i={},n=!1,a=e.document,o;function f(_){typeof _!="function"&&(_=new Function(""+_));for(var m=new Array(arguments.length-1),T=0;T<m.length;T++)m[T]=arguments[T+1];var S={callback:_,args:m};return i[t]=S,o(t),t++}function d(_){delete i[_]}function s(_){var m=_.callback,T=_.args;switch(T.length){case 0:m();break;case 1:m(T[0]);break;case 2:m(T[0],T[1]);break;case 3:m(T[0],T[1],T[2]);break;default:m.apply(r,T);break}}function l(_){if(n)setTimeout(l,0,_);else{var m=i[_];if(m){n=!0;try{s(m)}finally{d(_),n=!1}}}}function g(){o=function(_){process.nextTick(function(){l(_)})}}function u(){if(e.postMessage&&!e.importScripts){var _=!0,m=e.onmessage;return e.onmessage=function(){_=!1},e.postMessage("","*"),e.onmessage=m,_}}function c(){var _="setImmediate$"+Math.random()+"$",m=function(T){T.source===e&&typeof T.data=="string"&&T.data.indexOf(_)===0&&l(+T.data.slice(_.length))};e.addEventListener?e.addEventListener("message",m,!1):e.attachEvent("onmessage",m),o=function(T){e.postMessage(_+T,"*")}}function v(){var _=new MessageChannel;_.port1.onmessage=function(m){var T=m.data;l(T)},o=function(m){_.port2.postMessage(m)}}function b(){var _=a.documentElement;o=function(m){var T=a.createElement("script");T.onreadystatechange=function(){l(m),T.onreadystatechange=null,_.removeChild(T),T=null},_.appendChild(T)}}function k(){o=function(_){setTimeout(l,0,_)}}var h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,{}.toString.call(e.process)==="[object process]"?g():u()?c():e.MessageChannel?v():a&&"onreadystatechange"in a.createElement("script")?b():k(),h.setImmediate=f,h.clearImmediate=d})(typeof self>"u"?le:self);var zn;function re(){return zn||(zn=1,function(e){var r=oe,t=to(),i=Br,n=ar;function a(u){var c=null;return r.uint8array?c=new Uint8Array(u.length):c=new Array(u.length),f(u,c)}e.newBlob=function(u,c){e.checkSupport("blob");try{return new Blob([u],{type:c})}catch{try{var v=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,b=new v;return b.append(u),b.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};function o(u){return u}function f(u,c){for(var v=0;v<u.length;++v)c[v]=u.charCodeAt(v)&255;return c}var d={stringifyByChunk:function(u,c,v){var b=[],k=0,h=u.length;if(h<=v)return String.fromCharCode.apply(null,u);for(;k<h;)c==="array"||c==="nodebuffer"?b.push(String.fromCharCode.apply(null,u.slice(k,Math.min(k+v,h)))):b.push(String.fromCharCode.apply(null,u.subarray(k,Math.min(k+v,h)))),k+=v;return b.join("")},stringifyByChar:function(u){for(var c="",v=0;v<u.length;v++)c+=String.fromCharCode(u[v]);return c},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}}()}};function s(u){var c=65536,v=e.getTypeOf(u),b=!0;if(v==="uint8array"?b=d.applyCanBeUsed.uint8array:v==="nodebuffer"&&(b=d.applyCanBeUsed.nodebuffer),b)for(;c>1;)try{return d.stringifyByChunk(u,v,c)}catch{c=Math.floor(c/2)}return d.stringifyByChar(u)}e.applyFromCharCode=s;function l(u,c){for(var v=0;v<u.length;v++)c[v]=u[v];return c}var g={};g.string={string:o,array:function(u){return f(u,new Array(u.length))},arraybuffer:function(u){return g.string.uint8array(u).buffer},uint8array:function(u){return f(u,new Uint8Array(u.length))},nodebuffer:function(u){return f(u,i.allocBuffer(u.length))}},g.array={string:s,array:o,arraybuffer:function(u){return new Uint8Array(u).buffer},uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return i.newBufferFrom(u)}},g.arraybuffer={string:function(u){return s(new Uint8Array(u))},array:function(u){return l(new Uint8Array(u),new Array(u.byteLength))},arraybuffer:o,uint8array:function(u){return new Uint8Array(u)},nodebuffer:function(u){return i.newBufferFrom(new Uint8Array(u))}},g.uint8array={string:s,array:function(u){return l(u,new Array(u.length))},arraybuffer:function(u){return u.buffer},uint8array:o,nodebuffer:function(u){return i.newBufferFrom(u)}},g.nodebuffer={string:s,array:function(u){return l(u,new Array(u.length))},arraybuffer:function(u){return g.nodebuffer.uint8array(u).buffer},uint8array:function(u){return l(u,new Uint8Array(u.length))},nodebuffer:o},e.transformTo=function(u,c){if(c||(c=""),!u)return c;e.checkSupport(u);var v=e.getTypeOf(c),b=g[v][u](c);return b},e.resolve=function(u){for(var c=u.split("/"),v=[],b=0;b<c.length;b++){var k=c[b];k==="."||k===""&&b!==0&&b!==c.length-1||(k===".."?v.pop():v.push(k))}return v.join("/")},e.getTypeOf=function(u){if(typeof u=="string")return"string";if(Object.prototype.toString.call(u)==="[object Array]")return"array";if(r.nodebuffer&&i.isBuffer(u))return"nodebuffer";if(r.uint8array&&u instanceof Uint8Array)return"uint8array";if(r.arraybuffer&&u instanceof ArrayBuffer)return"arraybuffer"},e.checkSupport=function(u){var c=r[u.toLowerCase()];if(!c)throw new Error(u+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(u){var c="",v,b;for(b=0;b<(u||"").length;b++)v=u.charCodeAt(b),c+="\\x"+(v<16?"0":"")+v.toString(16).toUpperCase();return c},e.delay=function(u,c,v){setImmediate(function(){u.apply(v||null,c||[])})},e.inherits=function(u,c){var v=function(){};v.prototype=c.prototype,u.prototype=new v},e.extend=function(){var u={},c,v;for(c=0;c<arguments.length;c++)for(v in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],v)&&typeof u[v]>"u"&&(u[v]=arguments[c][v]);return u},e.prepareContent=function(u,c,v,b,k){var h=n.Promise.resolve(c).then(function(_){var m=r.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1);return m&&typeof FileReader<"u"?new n.Promise(function(T,S){var L=new FileReader;L.onload=function(M){T(M.target.result)},L.onerror=function(M){S(M.target.error)},L.readAsArrayBuffer(_)}):_});return h.then(function(_){var m=e.getTypeOf(_);return m?(m==="arraybuffer"?_=e.transformTo("uint8array",_):m==="string"&&(k?_=t.decode(_):v&&b!==!0&&(_=a(_))),_):n.Promise.reject(new Error("Can't read the data of '"+u+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}}(Kr)),Kr}function ro(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}ro.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,r){return this._listeners[e].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,r){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,r)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.end()}),e.on("error",function(t){r.error(t)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,r){return this.extraStreamInfo[e]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}};var Ee=ro;(function(e){for(var r=re(),t=oe,i=Br,n=Ee,a=new Array(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;var f=function(u){var c,v,b,k,h,_=u.length,m=0;for(k=0;k<_;k++)v=u.charCodeAt(k),(v&64512)===55296&&k+1<_&&(b=u.charCodeAt(k+1),(b&64512)===56320&&(v=65536+(v-55296<<10)+(b-56320),k++)),m+=v<128?1:v<2048?2:v<65536?3:4;for(t.uint8array?c=new Uint8Array(m):c=new Array(m),h=0,k=0;h<m;k++)v=u.charCodeAt(k),(v&64512)===55296&&k+1<_&&(b=u.charCodeAt(k+1),(b&64512)===56320&&(v=65536+(v-55296<<10)+(b-56320),k++)),v<128?c[h++]=v:v<2048?(c[h++]=192|v>>>6,c[h++]=128|v&63):v<65536?(c[h++]=224|v>>>12,c[h++]=128|v>>>6&63,c[h++]=128|v&63):(c[h++]=240|v>>>18,c[h++]=128|v>>>12&63,c[h++]=128|v>>>6&63,c[h++]=128|v&63);return c},d=function(u,c){var v;for(c=c||u.length,c>u.length&&(c=u.length),v=c-1;v>=0&&(u[v]&192)===128;)v--;return v<0||v===0?c:v+a[u[v]]>c?v:c},s=function(u){var c,v,b,k,h=u.length,_=new Array(h*2);for(v=0,c=0;c<h;){if(b=u[c++],b<128){_[v++]=b;continue}if(k=a[b],k>4){_[v++]=65533,c+=k-1;continue}for(b&=k===2?31:k===3?15:7;k>1&&c<h;)b=b<<6|u[c++]&63,k--;if(k>1){_[v++]=65533;continue}b<65536?_[v++]=b:(b-=65536,_[v++]=55296|b>>10&1023,_[v++]=56320|b&1023)}return _.length!==v&&(_.subarray?_=_.subarray(0,v):_.length=v),r.applyFromCharCode(_)};e.utf8encode=function(c){return t.nodebuffer?i.newBufferFrom(c,"utf-8"):f(c)},e.utf8decode=function(c){return t.nodebuffer?r.transformTo("nodebuffer",c).toString("utf-8"):(c=r.transformTo(t.uint8array?"uint8array":"array",c),s(c))};function l(){n.call(this,"utf-8 decode"),this.leftOver=null}r.inherits(l,n),l.prototype.processChunk=function(u){var c=r.transformTo(t.uint8array?"uint8array":"array",u.data);if(this.leftOver&&this.leftOver.length){if(t.uint8array){var v=c;c=new Uint8Array(v.length+this.leftOver.length),c.set(this.leftOver,0),c.set(v,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var b=d(c),k=c;b!==c.length&&(t.uint8array?(k=c.subarray(0,b),this.leftOver=c.subarray(b,c.length)):(k=c.slice(0,b),this.leftOver=c.slice(b,c.length))),this.push({data:e.utf8decode(k),meta:u.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=l;function g(){n.call(this,"utf-8 encode")}r.inherits(g,n),g.prototype.processChunk=function(u){this.push({data:e.utf8encode(u.data),meta:u.meta})},e.Utf8EncodeWorker=g})(At);var io=Ee,no=re();function Zi(e){io.call(this,"ConvertWorker to "+e),this.destType=e}no.inherits(Zi,io);Zi.prototype.processChunk=function(e){this.push({data:no.transformTo(this.destType,e.data),meta:e.meta})};var Kf=Zi,di,Bn;function Vf(){if(Bn)return di;Bn=1;var e=eo().Readable,r=re();r.inherits(t,e);function t(i,n,a){e.call(this,n),this._helper=i;var o=this;i.on("data",function(f,d){o.push(f)||o._helper.pause(),a&&a(d)}).on("error",function(f){o.emit("error",f)}).on("end",function(){o.push(null)})}return t.prototype._read=function(){this._helper.resume()},di=t,di}var at=re(),Jf=Kf,Qf=Ee,es=to(),ts=oe,rs=ar,ao=null;if(ts.nodestream)try{ao=Vf()}catch{}function is(e,r,t){switch(e){case"blob":return at.newBlob(at.transformTo("arraybuffer",r),t);case"base64":return es.encode(r);default:return at.transformTo(e,r)}}function ns(e,r){var t,i=0,n=null,a=0;for(t=0;t<r.length;t++)a+=r[t].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(n=new Uint8Array(a),t=0;t<r.length;t++)n.set(r[t],i),i+=r[t].length;return n;case"nodebuffer":return Buffer.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}function as(e,r){return new rs.Promise(function(t,i){var n=[],a=e._internalType,o=e._outputType,f=e._mimeType;e.on("data",function(d,s){n.push(d),r&&r(s)}).on("error",function(d){n=[],i(d)}).on("end",function(){try{var d=is(o,ns(a,n),f);t(d)}catch(s){i(s)}n=[]}).resume()})}function oo(e,r,t){var i=r;switch(r){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string";break}try{this._internalType=i,this._outputType=r,this._mimeType=t,at.checkSupport(i),this._worker=e.pipe(new Jf(i)),e.lock()}catch(n){this._worker=new Qf("error"),this._worker.error(n)}}oo.prototype={accumulate:function(e){return as(this,e)},on:function(e,r){var t=this;return e==="data"?this._worker.on(e,function(i){r.call(t,i.data,i.meta)}):this._worker.on(e,function(){at.delay(r,arguments,t)}),this},resume:function(){return at.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(at.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new ao(this,{objectMode:this._outputType!=="nodebuffer"},e)}};var fo=oo,Te={};Te.base64=!1;Te.binary=!1;Te.dir=!1;Te.createFolders=!0;Te.date=null;Te.compression=null;Te.compressionOptions=null;Te.comment=null;Te.unixPermissions=null;Te.dosPermissions=null;var Ur=re(),$r=Ee,os=16*1024;function Ot(e){$r.call(this,"DataWorker");var r=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(t){r.dataIsReady=!0,r.data=t,r.max=t&&t.length||0,r.type=Ur.getTypeOf(t),r.isPaused||r._tickAndRepeat()},function(t){r.error(t)})}Ur.inherits(Ot,$r);Ot.prototype.cleanUp=function(){$r.prototype.cleanUp.call(this),this.data=null};Ot.prototype.resume=function(){return $r.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Ur.delay(this._tickAndRepeat,[],this)),!0):!1};Ot.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(Ur.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};Ot.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=os,r=null,t=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":r=this.data.substring(this.index,t);break;case"uint8array":r=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":r=this.data.slice(this.index,t);break}return this.index=t,this.push({data:r,meta:{percent:this.max?this.index/this.max*100:0}})};var so=Ot,fs=re();function ss(){for(var e,r=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var lo=ss();function ls(e,r,t,i){var n=lo,a=i+t;e=e^-1;for(var o=i;o<a;o++)e=e>>>8^n[(e^r[o])&255];return e^-1}function ds(e,r,t,i){var n=lo,a=i+t;e=e^-1;for(var o=i;o<a;o++)e=e>>>8^n[(e^r.charCodeAt(o))&255];return e^-1}var Hi=function(r,t){if(typeof r>"u"||!r.length)return 0;var i=fs.getTypeOf(r)!=="string";return i?ls(t|0,r,r.length,0):ds(t|0,r,r.length,0)},uo=Ee,us=Hi,cs=re();function qi(){uo.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}cs.inherits(qi,uo);qi.prototype.processChunk=function(e){this.streamInfo.crc32=us(e.data,this.streamInfo.crc32||0),this.push(e)};var co=qi,hs=re(),Xi=Ee;function Gi(e){Xi.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}hs.inherits(Gi,Xi);Gi.prototype.processChunk=function(e){if(e){var r=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=r+e.data.length}Xi.prototype.processChunk.call(this,e)};var ps=Gi,Un=ar,$n=so,xs=co,Ii=ps;function Yi(e,r,t,i,n){this.compressedSize=e,this.uncompressedSize=r,this.crc32=t,this.compression=i,this.compressedContent=n}Yi.prototype={getContentWorker:function(){var e=new $n(Un.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Ii("data_length")),r=this;return e.on("end",function(){if(this.streamInfo.data_length!==r.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new $n(Un.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Yi.createWorkerFrom=function(e,r,t){return e.pipe(new xs).pipe(new Ii("uncompressedSize")).pipe(r.compressWorker(t)).pipe(new Ii("compressedSize")).withStreamInfo("compression",r)};var Ki=Yi,vs=fo,_s=so,ui=At,ci=Ki,Pn=Ee,Vi=function(e,r,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=r,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}};Vi.prototype={internalStream:function(e){var r=null,t="string";try{if(!e)throw new Error("No output type specified.");t=e.toLowerCase();var i=t==="string"||t==="text";(t==="binarystring"||t==="text")&&(t="string"),r=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(r=r.pipe(new ui.Utf8EncodeWorker)),!n&&i&&(r=r.pipe(new ui.Utf8DecodeWorker))}catch(a){r=new Pn("error"),r.error(a)}return new vs(r,t,"")},async:function(e,r){return this.internalStream(e).accumulate(r)},nodeStream:function(e,r){return this.internalStream(e||"nodebuffer").toNodejsStream(r)},_compressWorker:function(e,r){if(this._data instanceof ci&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new ui.Utf8EncodeWorker)),ci.createWorkerFrom(t,e,r)},_decompressWorker:function(){return this._data instanceof ci?this._data.getContentWorker():this._data instanceof Pn?this._data:new _s(this._data)}};var jn=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],bs=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(var hi=0;hi<jn.length;hi++)Vi.prototype[jn[hi]]=bs;var gs=Vi,ho={},Pr={},jr={},We={};(function(e){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(a,o){return Object.prototype.hasOwnProperty.call(a,o)}e.assign=function(a){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var f=o.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var d in f)t(f,d)&&(a[d]=f[d])}}return a},e.shrinkBuf=function(a,o){return a.length===o?a:a.subarray?a.subarray(0,o):(a.length=o,a)};var i={arraySet:function(a,o,f,d,s){if(o.subarray&&a.subarray){a.set(o.subarray(f,f+d),s);return}for(var l=0;l<d;l++)a[s+l]=o[f+l]},flattenChunks:function(a){var o,f,d,s,l,g;for(d=0,o=0,f=a.length;o<f;o++)d+=a[o].length;for(g=new Uint8Array(d),s=0,o=0,f=a.length;o<f;o++)l=a[o],g.set(l,s),s+=l.length;return g}},n={arraySet:function(a,o,f,d,s){for(var l=0;l<d;l++)a[s+l]=o[f+l]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,n))},e.setTyped(r)})(We);var or={},Be={},It={},ms=We,ws=4,Wn=0,Zn=1,ys=2;function Nt(e){for(var r=e.length;--r>=0;)e[r]=0}var Es=0,po=1,Ts=2,Ss=3,ks=258,Ji=29,fr=256,Gt=fr+1+Ji,Tt=30,Qi=19,xo=2*Gt+1,it=15,pi=16,Rs=7,en=256,vo=16,_o=17,bo=18,Ni=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],kr=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Cs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],go=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],As=512,je=new Array((Gt+2)*2);Nt(je);var Pt=new Array(Tt*2);Nt(Pt);var Yt=new Array(As);Nt(Yt);var Kt=new Array(ks-Ss+1);Nt(Kt);var tn=new Array(Ji);Nt(tn);var Nr=new Array(Tt);Nt(Nr);function xi(e,r,t,i,n){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}var mo,wo,yo;function vi(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}function Eo(e){return e<256?Yt[e]:Yt[256+(e>>>7)]}function Vt(e,r){e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255}function ve(e,r,t){e.bi_valid>pi-t?(e.bi_buf|=r<<e.bi_valid&65535,Vt(e,e.bi_buf),e.bi_buf=r>>pi-e.bi_valid,e.bi_valid+=t-pi):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)}function Fe(e,r,t){ve(e,t[r*2],t[r*2+1])}function To(e,r){var t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1}function Os(e){e.bi_valid===16?(Vt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function Is(e,r){var t=r.dyn_tree,i=r.max_code,n=r.stat_desc.static_tree,a=r.stat_desc.has_stree,o=r.stat_desc.extra_bits,f=r.stat_desc.extra_base,d=r.stat_desc.max_length,s,l,g,u,c,v,b=0;for(u=0;u<=it;u++)e.bl_count[u]=0;for(t[e.heap[e.heap_max]*2+1]=0,s=e.heap_max+1;s<xo;s++)l=e.heap[s],u=t[t[l*2+1]*2+1]+1,u>d&&(u=d,b++),t[l*2+1]=u,!(l>i)&&(e.bl_count[u]++,c=0,l>=f&&(c=o[l-f]),v=t[l*2],e.opt_len+=v*(u+c),a&&(e.static_len+=v*(n[l*2+1]+c)));if(b!==0){do{for(u=d-1;e.bl_count[u]===0;)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[d]--,b-=2}while(b>0);for(u=d;u!==0;u--)for(l=e.bl_count[u];l!==0;)g=e.heap[--s],!(g>i)&&(t[g*2+1]!==u&&(e.opt_len+=(u-t[g*2+1])*t[g*2],t[g*2+1]=u),l--)}}function So(e,r,t){var i=new Array(it+1),n=0,a,o;for(a=1;a<=it;a++)i[a]=n=n+t[a-1]<<1;for(o=0;o<=r;o++){var f=e[o*2+1];f!==0&&(e[o*2]=To(i[f]++,f))}}function Ns(){var e,r,t,i,n,a=new Array(it+1);for(t=0,i=0;i<Ji-1;i++)for(tn[i]=t,e=0;e<1<<Ni[i];e++)Kt[t++]=i;for(Kt[t-1]=i,n=0,i=0;i<16;i++)for(Nr[i]=n,e=0;e<1<<kr[i];e++)Yt[n++]=i;for(n>>=7;i<Tt;i++)for(Nr[i]=n<<7,e=0;e<1<<kr[i]-7;e++)Yt[256+n++]=i;for(r=0;r<=it;r++)a[r]=0;for(e=0;e<=143;)je[e*2+1]=8,e++,a[8]++;for(;e<=255;)je[e*2+1]=9,e++,a[9]++;for(;e<=279;)je[e*2+1]=7,e++,a[7]++;for(;e<=287;)je[e*2+1]=8,e++,a[8]++;for(So(je,Gt+1,a),e=0;e<Tt;e++)Pt[e*2+1]=5,Pt[e*2]=To(e,5);mo=new xi(je,Ni,fr+1,Gt,it),wo=new xi(Pt,kr,0,Tt,it),yo=new xi(new Array(0),Cs,0,Qi,Rs)}function ko(e){var r;for(r=0;r<Gt;r++)e.dyn_ltree[r*2]=0;for(r=0;r<Tt;r++)e.dyn_dtree[r*2]=0;for(r=0;r<Qi;r++)e.bl_tree[r*2]=0;e.dyn_ltree[en*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function Ro(e){e.bi_valid>8?Vt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Ds(e,r,t,i){Ro(e),Vt(e,t),Vt(e,~t),ms.arraySet(e.pending_buf,e.window,r,t,e.pending),e.pending+=t}function Hn(e,r,t,i){var n=r*2,a=t*2;return e[n]<e[a]||e[n]===e[a]&&i[r]<=i[t]}function _i(e,r,t){for(var i=e.heap[t],n=t<<1;n<=e.heap_len&&(n<e.heap_len&&Hn(r,e.heap[n+1],e.heap[n],e.depth)&&n++,!Hn(r,i,e.heap[n],e.depth));)e.heap[t]=e.heap[n],t=n,n<<=1;e.heap[t]=i}function qn(e,r,t){var i,n,a=0,o,f;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],n=e.pending_buf[e.l_buf+a],a++,i===0?Fe(e,n,r):(o=Kt[n],Fe(e,o+fr+1,r),f=Ni[o],f!==0&&(n-=tn[o],ve(e,n,f)),i--,o=Eo(i),Fe(e,o,t),f=kr[o],f!==0&&(i-=Nr[o],ve(e,i,f)));while(a<e.last_lit);Fe(e,en,r)}function Di(e,r){var t=r.dyn_tree,i=r.stat_desc.static_tree,n=r.stat_desc.has_stree,a=r.stat_desc.elems,o,f,d=-1,s;for(e.heap_len=0,e.heap_max=xo,o=0;o<a;o++)t[o*2]!==0?(e.heap[++e.heap_len]=d=o,e.depth[o]=0):t[o*2+1]=0;for(;e.heap_len<2;)s=e.heap[++e.heap_len]=d<2?++d:0,t[s*2]=1,e.depth[s]=0,e.opt_len--,n&&(e.static_len-=i[s*2+1]);for(r.max_code=d,o=e.heap_len>>1;o>=1;o--)_i(e,t,o);s=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],_i(e,t,1),f=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=f,t[s*2]=t[o*2]+t[f*2],e.depth[s]=(e.depth[o]>=e.depth[f]?e.depth[o]:e.depth[f])+1,t[o*2+1]=t[f*2+1]=s,e.heap[1]=s++,_i(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Is(e,r),So(t,d,e.bl_count)}function Xn(e,r,t){var i,n=-1,a,o=r[0*2+1],f=0,d=7,s=4;for(o===0&&(d=138,s=3),r[(t+1)*2+1]=65535,i=0;i<=t;i++)a=o,o=r[(i+1)*2+1],!(++f<d&&a===o)&&(f<s?e.bl_tree[a*2]+=f:a!==0?(a!==n&&e.bl_tree[a*2]++,e.bl_tree[vo*2]++):f<=10?e.bl_tree[_o*2]++:e.bl_tree[bo*2]++,f=0,n=a,o===0?(d=138,s=3):a===o?(d=6,s=3):(d=7,s=4))}function Gn(e,r,t){var i,n=-1,a,o=r[0*2+1],f=0,d=7,s=4;for(o===0&&(d=138,s=3),i=0;i<=t;i++)if(a=o,o=r[(i+1)*2+1],!(++f<d&&a===o)){if(f<s)do Fe(e,a,e.bl_tree);while(--f!==0);else a!==0?(a!==n&&(Fe(e,a,e.bl_tree),f--),Fe(e,vo,e.bl_tree),ve(e,f-3,2)):f<=10?(Fe(e,_o,e.bl_tree),ve(e,f-3,3)):(Fe(e,bo,e.bl_tree),ve(e,f-11,7));f=0,n=a,o===0?(d=138,s=3):a===o?(d=6,s=3):(d=7,s=4)}}function Ls(e){var r;for(Xn(e,e.dyn_ltree,e.l_desc.max_code),Xn(e,e.dyn_dtree,e.d_desc.max_code),Di(e,e.bl_desc),r=Qi-1;r>=3&&e.bl_tree[go[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r}function Ms(e,r,t,i){var n;for(ve(e,r-257,5),ve(e,t-1,5),ve(e,i-4,4),n=0;n<i;n++)ve(e,e.bl_tree[go[n]*2+1],3);Gn(e,e.dyn_ltree,r-1),Gn(e,e.dyn_dtree,t-1)}function Fs(e){var r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return Wn;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Zn;for(t=32;t<fr;t++)if(e.dyn_ltree[t*2]!==0)return Zn;return Wn}var Yn=!1;function zs(e){Yn||(Ns(),Yn=!0),e.l_desc=new vi(e.dyn_ltree,mo),e.d_desc=new vi(e.dyn_dtree,wo),e.bl_desc=new vi(e.bl_tree,yo),e.bi_buf=0,e.bi_valid=0,ko(e)}function Co(e,r,t,i){ve(e,(Es<<1)+(i?1:0),3),Ds(e,r,t)}function Bs(e){ve(e,po<<1,3),Fe(e,en,je),Os(e)}function Us(e,r,t,i){var n,a,o=0;e.level>0?(e.strm.data_type===ys&&(e.strm.data_type=Fs(e)),Di(e,e.l_desc),Di(e,e.d_desc),o=Ls(e),n=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=n&&(n=a)):n=a=t+5,t+4<=n&&r!==-1?Co(e,r,t,i):e.strategy===ws||a===n?(ve(e,(po<<1)+(i?1:0),3),qn(e,je,Pt)):(ve(e,(Ts<<1)+(i?1:0),3),Ms(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),qn(e,e.dyn_ltree,e.dyn_dtree)),ko(e),i&&Ro(e)}function $s(e,r,t){return e.pending_buf[e.d_buf+e.last_lit*2]=r>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=r&255,e.pending_buf[e.l_buf+e.last_lit]=t&255,e.last_lit++,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(Kt[t]+fr+1)*2]++,e.dyn_dtree[Eo(r)*2]++),e.last_lit===e.lit_bufsize-1}It._tr_init=zs;It._tr_stored_block=Co;It._tr_flush_block=Us;It._tr_tally=$s;It._tr_align=Bs;function Ps(e,r,t,i){for(var n=e&65535|0,a=e>>>16&65535|0,o=0;t!==0;){o=t>2e3?2e3:t,t-=o;do n=n+r[i++]|0,a=a+n|0;while(--o);n%=65521,a%=65521}return n|a<<16|0}var Ao=Ps;function js(){for(var e,r=[],t=0;t<256;t++){e=t;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var Ws=js();function Zs(e,r,t,i){var n=Ws,a=i+t;e^=-1;for(var o=i;o<a;o++)e=e>>>8^n[(e^r[o])&255];return e^-1}var Oo=Zs,rn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},pe=We,ge=It,Io=Ao,Ge=Oo,Hs=rn,ut=0,qs=1,Xs=3,Qe=4,Kn=5,ze=0,Vn=1,me=-2,Gs=-3,bi=-5,Ys=-1,Ks=1,br=2,Vs=3,Js=4,Qs=0,el=2,Wr=8,tl=9,rl=15,il=8,nl=29,al=256,Li=al+1+nl,ol=30,fl=19,sl=2*Li+1,ll=15,X=3,Ve=258,Ae=Ve+X+1,dl=32,Zr=42,Mi=69,Rr=73,Cr=91,Ar=103,nt=113,$t=666,se=1,sr=2,ot=3,Dt=4,ul=3;function Je(e,r){return e.msg=Hs[r],r}function Jn(e){return(e<<1)-(e>4?9:0)}function Ke(e){for(var r=e.length;--r>=0;)e[r]=0}function Ye(e){var r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(pe.arraySet(e.output,r.pending_buf,r.pending_out,t,e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))}function ce(e,r){ge._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Ye(e.strm)}function G(e,r){e.pending_buf[e.pending++]=r}function Ut(e,r){e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255}function cl(e,r,t,i){var n=e.avail_in;return n>i&&(n=i),n===0?0:(e.avail_in-=n,pe.arraySet(r,e.input,e.next_in,n,t),e.state.wrap===1?e.adler=Io(e.adler,r,n,t):e.state.wrap===2&&(e.adler=Ge(e.adler,r,n,t)),e.next_in+=n,e.total_in+=n,n)}function No(e,r){var t=e.max_chain_length,i=e.strstart,n,a,o=e.prev_length,f=e.nice_match,d=e.strstart>e.w_size-Ae?e.strstart-(e.w_size-Ae):0,s=e.window,l=e.w_mask,g=e.prev,u=e.strstart+Ve,c=s[i+o-1],v=s[i+o];e.prev_length>=e.good_match&&(t>>=2),f>e.lookahead&&(f=e.lookahead);do if(n=r,!(s[n+o]!==v||s[n+o-1]!==c||s[n]!==s[i]||s[++n]!==s[i+1])){i+=2,n++;do;while(s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&s[++i]===s[++n]&&i<u);if(a=Ve-(u-i),i=u-Ve,a>o){if(e.match_start=r,o=a,a>=f)break;c=s[i+o-1],v=s[i+o]}}while((r=g[r&l])>d&&--t!==0);return o<=e.lookahead?o:e.lookahead}function ft(e){var r=e.w_size,t,i,n,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-Ae)){pe.arraySet(e.window,e.window,r,r,0),e.match_start-=r,e.strstart-=r,e.block_start-=r,i=e.hash_size,t=i;do n=e.head[--t],e.head[t]=n>=r?n-r:0;while(--i);i=r,t=i;do n=e.prev[--t],e.prev[t]=n>=r?n-r:0;while(--i);a+=r}if(e.strm.avail_in===0)break;if(i=cl(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=X)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+X-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<X)););}while(e.lookahead<Ae&&e.strm.avail_in!==0)}function hl(e,r){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ft(e),e.lookahead===0&&r===ut)return se;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+t;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ce(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Ae&&(ce(e,!1),e.strm.avail_out===0))return se}return e.insert=0,r===Qe?(ce(e,!0),e.strm.avail_out===0?ot:Dt):(e.strstart>e.block_start&&(ce(e,!1),e.strm.avail_out===0),se)}function gi(e,r){for(var t,i;;){if(e.lookahead<Ae){if(ft(e),e.lookahead<Ae&&r===ut)return se;if(e.lookahead===0)break}if(t=0,e.lookahead>=X&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+X-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Ae&&(e.match_length=No(e,t)),e.match_length>=X)if(i=ge._tr_tally(e,e.strstart-e.match_start,e.match_length-X),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=X){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+X-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ce(e,!1),e.strm.avail_out===0))return se}return e.insert=e.strstart<X-1?e.strstart:X-1,r===Qe?(ce(e,!0),e.strm.avail_out===0?ot:Dt):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?se:sr}function _t(e,r){for(var t,i,n;;){if(e.lookahead<Ae){if(ft(e),e.lookahead<Ae&&r===ut)return se;if(e.lookahead===0)break}if(t=0,e.lookahead>=X&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+X-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=X-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Ae&&(e.match_length=No(e,t),e.match_length<=5&&(e.strategy===Ks||e.match_length===X&&e.strstart-e.match_start>4096)&&(e.match_length=X-1)),e.prev_length>=X&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-X,i=ge._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-X),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+X-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=X-1,e.strstart++,i&&(ce(e,!1),e.strm.avail_out===0))return se}else if(e.match_available){if(i=ge._tr_tally(e,0,e.window[e.strstart-1]),i&&ce(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return se}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=ge._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<X-1?e.strstart:X-1,r===Qe?(ce(e,!0),e.strm.avail_out===0?ot:Dt):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?se:sr}function pl(e,r){for(var t,i,n,a,o=e.window;;){if(e.lookahead<=Ve){if(ft(e),e.lookahead<=Ve&&r===ut)return se;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=X&&e.strstart>0&&(n=e.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){a=e.strstart+Ve;do;while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<a);e.match_length=Ve-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=X?(t=ge._tr_tally(e,1,e.match_length-X),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ce(e,!1),e.strm.avail_out===0))return se}return e.insert=0,r===Qe?(ce(e,!0),e.strm.avail_out===0?ot:Dt):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?se:sr}function xl(e,r){for(var t;;){if(e.lookahead===0&&(ft(e),e.lookahead===0)){if(r===ut)return se;break}if(e.match_length=0,t=ge._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ce(e,!1),e.strm.avail_out===0))return se}return e.insert=0,r===Qe?(ce(e,!0),e.strm.avail_out===0?ot:Dt):e.last_lit&&(ce(e,!1),e.strm.avail_out===0)?se:sr}function Le(e,r,t,i,n){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=i,this.func=n}var yt;yt=[new Le(0,0,0,0,hl),new Le(4,4,8,4,gi),new Le(4,5,16,8,gi),new Le(4,6,32,32,gi),new Le(4,4,16,16,_t),new Le(8,16,32,32,_t),new Le(8,16,128,128,_t),new Le(8,32,128,256,_t),new Le(32,128,258,1024,_t),new Le(32,258,258,4096,_t)];function vl(e){e.window_size=2*e.w_size,Ke(e.head),e.max_lazy_match=yt[e.level].max_lazy,e.good_match=yt[e.level].good_length,e.nice_match=yt[e.level].nice_length,e.max_chain_length=yt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=X-1,e.match_available=0,e.ins_h=0}function _l(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new pe.Buf16(sl*2),this.dyn_dtree=new pe.Buf16((2*ol+1)*2),this.bl_tree=new pe.Buf16((2*fl+1)*2),Ke(this.dyn_ltree),Ke(this.dyn_dtree),Ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new pe.Buf16(ll+1),this.heap=new pe.Buf16(2*Li+1),Ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new pe.Buf16(2*Li+1),Ke(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Do(e){var r;return!e||!e.state?Je(e,me):(e.total_in=e.total_out=0,e.data_type=el,r=e.state,r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap?Zr:nt,e.adler=r.wrap===2?0:1,r.last_flush=ut,ge._tr_init(r),ze)}function Lo(e){var r=Do(e);return r===ze&&vl(e.state),r}function bl(e,r){return!e||!e.state||e.state.wrap!==2?me:(e.state.gzhead=r,ze)}function Mo(e,r,t,i,n,a){if(!e)return me;var o=1;if(r===Ys&&(r=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>tl||t!==Wr||i<8||i>15||r<0||r>9||a<0||a>Js)return Je(e,me);i===8&&(i=9);var f=new _l;return e.state=f,f.strm=e,f.wrap=o,f.gzhead=null,f.w_bits=i,f.w_size=1<<f.w_bits,f.w_mask=f.w_size-1,f.hash_bits=n+7,f.hash_size=1<<f.hash_bits,f.hash_mask=f.hash_size-1,f.hash_shift=~~((f.hash_bits+X-1)/X),f.window=new pe.Buf8(f.w_size*2),f.head=new pe.Buf16(f.hash_size),f.prev=new pe.Buf16(f.w_size),f.lit_bufsize=1<<n+6,f.pending_buf_size=f.lit_bufsize*4,f.pending_buf=new pe.Buf8(f.pending_buf_size),f.d_buf=1*f.lit_bufsize,f.l_buf=3*f.lit_bufsize,f.level=r,f.strategy=a,f.method=t,Lo(e)}function gl(e,r){return Mo(e,r,Wr,rl,il,Qs)}function ml(e,r){var t,i,n,a;if(!e||!e.state||r>Kn||r<0)return e?Je(e,me):me;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===$t&&r!==Qe)return Je(e,e.avail_out===0?bi:me);if(i.strm=e,t=i.last_flush,i.last_flush=r,i.status===Zr)if(i.wrap===2)e.adler=0,G(i,31),G(i,139),G(i,8),i.gzhead?(G(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),G(i,i.gzhead.time&255),G(i,i.gzhead.time>>8&255),G(i,i.gzhead.time>>16&255),G(i,i.gzhead.time>>24&255),G(i,i.level===9?2:i.strategy>=br||i.level<2?4:0),G(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(G(i,i.gzhead.extra.length&255),G(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Ge(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Mi):(G(i,0),G(i,0),G(i,0),G(i,0),G(i,0),G(i,i.level===9?2:i.strategy>=br||i.level<2?4:0),G(i,ul),i.status=nt);else{var o=Wr+(i.w_bits-8<<4)<<8,f=-1;i.strategy>=br||i.level<2?f=0:i.level<6?f=1:i.level===6?f=2:f=3,o|=f<<6,i.strstart!==0&&(o|=dl),o+=31-o%31,i.status=nt,Ut(i,o),i.strstart!==0&&(Ut(i,e.adler>>>16),Ut(i,e.adler&65535)),e.adler=1}if(i.status===Mi)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),Ye(e),n=i.pending,i.pending===i.pending_buf_size));)G(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=Rr)}else i.status=Rr;if(i.status===Rr)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),Ye(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.name.length?a=i.gzhead.name.charCodeAt(i.gzindex++)&255:a=0,G(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),a===0&&(i.gzindex=0,i.status=Cr)}else i.status=Cr;if(i.status===Cr)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),Ye(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.comment.length?a=i.gzhead.comment.charCodeAt(i.gzindex++)&255:a=0,G(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=Ge(e.adler,i.pending_buf,i.pending-n,n)),a===0&&(i.status=Ar)}else i.status=Ar;if(i.status===Ar&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Ye(e),i.pending+2<=i.pending_buf_size&&(G(i,e.adler&255),G(i,e.adler>>8&255),e.adler=0,i.status=nt)):i.status=nt),i.pending!==0){if(Ye(e),e.avail_out===0)return i.last_flush=-1,ze}else if(e.avail_in===0&&Jn(r)<=Jn(t)&&r!==Qe)return Je(e,bi);if(i.status===$t&&e.avail_in!==0)return Je(e,bi);if(e.avail_in!==0||i.lookahead!==0||r!==ut&&i.status!==$t){var d=i.strategy===br?xl(i,r):i.strategy===Vs?pl(i,r):yt[i.level].func(i,r);if((d===ot||d===Dt)&&(i.status=$t),d===se||d===ot)return e.avail_out===0&&(i.last_flush=-1),ze;if(d===sr&&(r===qs?ge._tr_align(i):r!==Kn&&(ge._tr_stored_block(i,0,0,!1),r===Xs&&(Ke(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Ye(e),e.avail_out===0))return i.last_flush=-1,ze}return r!==Qe?ze:i.wrap<=0?Vn:(i.wrap===2?(G(i,e.adler&255),G(i,e.adler>>8&255),G(i,e.adler>>16&255),G(i,e.adler>>24&255),G(i,e.total_in&255),G(i,e.total_in>>8&255),G(i,e.total_in>>16&255),G(i,e.total_in>>24&255)):(Ut(i,e.adler>>>16),Ut(i,e.adler&65535)),Ye(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?ze:Vn)}function wl(e){var r;return!e||!e.state?me:(r=e.state.status,r!==Zr&&r!==Mi&&r!==Rr&&r!==Cr&&r!==Ar&&r!==nt&&r!==$t?Je(e,me):(e.state=null,r===nt?Je(e,Gs):ze))}function yl(e,r){var t=r.length,i,n,a,o,f,d,s,l;if(!e||!e.state||(i=e.state,o=i.wrap,o===2||o===1&&i.status!==Zr||i.lookahead))return me;for(o===1&&(e.adler=Io(e.adler,r,t,0)),i.wrap=0,t>=i.w_size&&(o===0&&(Ke(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new pe.Buf8(i.w_size),pe.arraySet(l,r,t-i.w_size,i.w_size,0),r=l,t=i.w_size),f=e.avail_in,d=e.next_in,s=e.input,e.avail_in=t,e.next_in=0,e.input=r,ft(i);i.lookahead>=X;){n=i.strstart,a=i.lookahead-(X-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+X-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--a);i.strstart=n,i.lookahead=X-1,ft(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=X-1,i.match_available=0,e.next_in=d,e.input=s,e.avail_in=f,i.wrap=o,ze}Be.deflateInit=gl;Be.deflateInit2=Mo;Be.deflateReset=Lo;Be.deflateResetKeep=Do;Be.deflateSetHeader=bl;Be.deflate=ml;Be.deflateEnd=wl;Be.deflateSetDictionary=yl;Be.deflateInfo="pako deflate (from Nodeca project)";var ct={},Hr=We,Fo=!0,zo=!0;try{String.fromCharCode.apply(null,[0])}catch{Fo=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{zo=!1}var Jt=new Hr.Buf8(256);for(var He=0;He<256;He++)Jt[He]=He>=252?6:He>=248?5:He>=240?4:He>=224?3:He>=192?2:1;Jt[254]=Jt[254]=1;ct.string2buf=function(e){var r,t,i,n,a,o=e.length,f=0;for(n=0;n<o;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<o&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),f+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Hr.Buf8(f),a=0,n=0;a<f;n++)t=e.charCodeAt(n),(t&64512)===55296&&n+1<o&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(t=65536+(t-55296<<10)+(i-56320),n++)),t<128?r[a++]=t:t<2048?(r[a++]=192|t>>>6,r[a++]=128|t&63):t<65536?(r[a++]=224|t>>>12,r[a++]=128|t>>>6&63,r[a++]=128|t&63):(r[a++]=240|t>>>18,r[a++]=128|t>>>12&63,r[a++]=128|t>>>6&63,r[a++]=128|t&63);return r};function Bo(e,r){if(r<65534&&(e.subarray&&zo||!e.subarray&&Fo))return String.fromCharCode.apply(null,Hr.shrinkBuf(e,r));for(var t="",i=0;i<r;i++)t+=String.fromCharCode(e[i]);return t}ct.buf2binstring=function(e){return Bo(e,e.length)};ct.binstring2buf=function(e){for(var r=new Hr.Buf8(e.length),t=0,i=r.length;t<i;t++)r[t]=e.charCodeAt(t);return r};ct.buf2string=function(e,r){var t,i,n,a,o=r||e.length,f=new Array(o*2);for(i=0,t=0;t<o;){if(n=e[t++],n<128){f[i++]=n;continue}if(a=Jt[n],a>4){f[i++]=65533,t+=a-1;continue}for(n&=a===2?31:a===3?15:7;a>1&&t<o;)n=n<<6|e[t++]&63,a--;if(a>1){f[i++]=65533;continue}n<65536?f[i++]=n:(n-=65536,f[i++]=55296|n>>10&1023,f[i++]=56320|n&1023)}return Bo(f,i)};ct.utf8border=function(e,r){var t;for(r=r||e.length,r>e.length&&(r=e.length),t=r-1;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Jt[e[t]]>r?t:r};function El(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Uo=El,jt=Be,Wt=We,Fi=ct,zi=rn,Tl=Uo,$o=Object.prototype.toString,Sl=0,mi=4,St=0,Qn=1,ea=2,kl=-1,Rl=0,Cl=8;function st(e){if(!(this instanceof st))return new st(e);this.options=Wt.assign({level:kl,method:Cl,chunkSize:16384,windowBits:15,memLevel:8,strategy:Rl,to:""},e||{});var r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Tl,this.strm.avail_out=0;var t=jt.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==St)throw new Error(zi[t]);if(r.header&&jt.deflateSetHeader(this.strm,r.header),r.dictionary){var i;if(typeof r.dictionary=="string"?i=Fi.string2buf(r.dictionary):$o.call(r.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(r.dictionary):i=r.dictionary,t=jt.deflateSetDictionary(this.strm,i),t!==St)throw new Error(zi[t]);this._dict_set=!0}}st.prototype.push=function(e,r){var t=this.strm,i=this.options.chunkSize,n,a;if(this.ended)return!1;a=r===~~r?r:r===!0?mi:Sl,typeof e=="string"?t.input=Fi.string2buf(e):$o.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Wt.Buf8(i),t.next_out=0,t.avail_out=i),n=jt.deflate(t,a),n!==Qn&&n!==St)return this.onEnd(n),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(a===mi||a===ea))&&(this.options.to==="string"?this.onData(Fi.buf2binstring(Wt.shrinkBuf(t.output,t.next_out))):this.onData(Wt.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&n!==Qn);return a===mi?(n=jt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===St):(a===ea&&(this.onEnd(St),t.avail_out=0),!0)};st.prototype.onData=function(e){this.chunks.push(e)};st.prototype.onEnd=function(e){e===St&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Wt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function nn(e,r){var t=new st(r);if(t.push(e,!0),t.err)throw t.msg||zi[t.err];return t.result}function Al(e,r){return r=r||{},r.raw=!0,nn(e,r)}function Ol(e,r){return r=r||{},r.gzip=!0,nn(e,r)}or.Deflate=st;or.deflate=nn;or.deflateRaw=Al;or.gzip=Ol;var lr={},Oe={},gr=30,Il=12,Nl=function(r,t){var i,n,a,o,f,d,s,l,g,u,c,v,b,k,h,_,m,T,S,L,M,D,z,W,I;i=r.state,n=r.next_in,W=r.input,a=n+(r.avail_in-5),o=r.next_out,I=r.output,f=o-(t-r.avail_out),d=o+(r.avail_out-257),s=i.dmax,l=i.wsize,g=i.whave,u=i.wnext,c=i.window,v=i.hold,b=i.bits,k=i.lencode,h=i.distcode,_=(1<<i.lenbits)-1,m=(1<<i.distbits)-1;e:do{b<15&&(v+=W[n++]<<b,b+=8,v+=W[n++]<<b,b+=8),T=k[v&_];t:for(;;){if(S=T>>>24,v>>>=S,b-=S,S=T>>>16&255,S===0)I[o++]=T&65535;else if(S&16){L=T&65535,S&=15,S&&(b<S&&(v+=W[n++]<<b,b+=8),L+=v&(1<<S)-1,v>>>=S,b-=S),b<15&&(v+=W[n++]<<b,b+=8,v+=W[n++]<<b,b+=8),T=h[v&m];r:for(;;){if(S=T>>>24,v>>>=S,b-=S,S=T>>>16&255,S&16){if(M=T&65535,S&=15,b<S&&(v+=W[n++]<<b,b+=8,b<S&&(v+=W[n++]<<b,b+=8)),M+=v&(1<<S)-1,M>s){r.msg="invalid distance too far back",i.mode=gr;break e}if(v>>>=S,b-=S,S=o-f,M>S){if(S=M-S,S>g&&i.sane){r.msg="invalid distance too far back",i.mode=gr;break e}if(D=0,z=c,u===0){if(D+=l-S,S<L){L-=S;do I[o++]=c[D++];while(--S);D=o-M,z=I}}else if(u<S){if(D+=l+u-S,S-=u,S<L){L-=S;do I[o++]=c[D++];while(--S);if(D=0,u<L){S=u,L-=S;do I[o++]=c[D++];while(--S);D=o-M,z=I}}}else if(D+=u-S,S<L){L-=S;do I[o++]=c[D++];while(--S);D=o-M,z=I}for(;L>2;)I[o++]=z[D++],I[o++]=z[D++],I[o++]=z[D++],L-=3;L&&(I[o++]=z[D++],L>1&&(I[o++]=z[D++]))}else{D=o-M;do I[o++]=I[D++],I[o++]=I[D++],I[o++]=I[D++],L-=3;while(L>2);L&&(I[o++]=I[D++],L>1&&(I[o++]=I[D++]))}}else if(S&64){r.msg="invalid distance code",i.mode=gr;break e}else{T=h[(T&65535)+(v&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){i.mode=Il;break e}else{r.msg="invalid literal/length code",i.mode=gr;break e}else{T=k[(T&65535)+(v&(1<<S)-1)];continue t}break}}while(n<a&&o<d);L=b>>3,n-=L,b-=L<<3,v&=(1<<b)-1,r.next_in=n,r.next_out=o,r.avail_in=n<a?5+(a-n):5-(n-a),r.avail_out=o<d?257+(d-o):257-(o-d),i.hold=v,i.bits=b},ta=We,bt=15,ra=852,ia=592,na=0,wi=1,aa=2,Dl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ll=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ml=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Fl=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],zl=function(r,t,i,n,a,o,f,d){var s=d.bits,l=0,g=0,u=0,c=0,v=0,b=0,k=0,h=0,_=0,m=0,T,S,L,M,D,z=null,W=0,I,Q=new ta.Buf16(bt+1),de=new ta.Buf16(bt+1),Z=null,Ue=0,Ze,y,w;for(l=0;l<=bt;l++)Q[l]=0;for(g=0;g<n;g++)Q[t[i+g]]++;for(v=s,c=bt;c>=1&&Q[c]===0;c--);if(v>c&&(v=c),c===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,d.bits=1,0;for(u=1;u<c&&Q[u]===0;u++);for(v<u&&(v=u),h=1,l=1;l<=bt;l++)if(h<<=1,h-=Q[l],h<0)return-1;if(h>0&&(r===na||c!==1))return-1;for(de[1]=0,l=1;l<bt;l++)de[l+1]=de[l]+Q[l];for(g=0;g<n;g++)t[i+g]!==0&&(f[de[t[i+g]]++]=g);if(r===na?(z=Z=f,I=19):r===wi?(z=Dl,W-=257,Z=Ll,Ue-=257,I=256):(z=Ml,Z=Fl,I=-1),m=0,g=0,l=u,D=o,b=v,k=0,L=-1,_=1<<v,M=_-1,r===wi&&_>ra||r===aa&&_>ia)return 1;for(;;){Ze=l-k,f[g]<I?(y=0,w=f[g]):f[g]>I?(y=Z[Ue+f[g]],w=z[W+f[g]]):(y=96,w=0),T=1<<l-k,S=1<<b,u=S;do S-=T,a[D+(m>>k)+S]=Ze<<24|y<<16|w|0;while(S!==0);for(T=1<<l-1;m&T;)T>>=1;if(T!==0?(m&=T-1,m+=T):m=0,g++,--Q[l]===0){if(l===c)break;l=t[i+f[g]]}if(l>v&&(m&M)!==L){for(k===0&&(k=v),D+=u,b=l-k,h=1<<b;b+k<c&&(h-=Q[b+k],!(h<=0));)b++,h<<=1;if(_+=1<<b,r===wi&&_>ra||r===aa&&_>ia)return 1;L=m&M,a[L]=v<<24|b<<16|D-o|0}}return m!==0&&(a[D+m]=l-k<<24|64<<16|0),d.bits=v,0},_e=We,Bi=Ao,Me=Oo,Bl=Nl,Zt=zl,Ul=0,Po=1,jo=2,oa=4,$l=5,mr=6,lt=0,Pl=1,jl=2,ye=-2,Wo=-3,Zo=-4,Wl=-5,fa=8,Ho=1,sa=2,la=3,da=4,ua=5,ca=6,ha=7,pa=8,xa=9,va=10,Dr=11,$e=12,yi=13,_a=14,Ei=15,ba=16,ga=17,ma=18,wa=19,wr=20,yr=21,ya=22,Ea=23,Ta=24,Sa=25,ka=26,Ti=27,Ra=28,Ca=29,ee=30,qo=31,Zl=32,Hl=852,ql=592,Xl=15,Gl=Xl;function Aa(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Yl(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _e.Buf16(320),this.work=new _e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Xo(e){var r;return!e||!e.state?ye:(r=e.state,e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Ho,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new _e.Buf32(Hl),r.distcode=r.distdyn=new _e.Buf32(ql),r.sane=1,r.back=-1,lt)}function Go(e){var r;return!e||!e.state?ye:(r=e.state,r.wsize=0,r.whave=0,r.wnext=0,Xo(e))}function Yo(e,r){var t,i;return!e||!e.state||(i=e.state,r<0?(t=0,r=-r):(t=(r>>4)+1,r<48&&(r&=15)),r&&(r<8||r>15))?ye:(i.window!==null&&i.wbits!==r&&(i.window=null),i.wrap=t,i.wbits=r,Go(e))}function Ko(e,r){var t,i;return e?(i=new Yl,e.state=i,i.window=null,t=Yo(e,r),t!==lt&&(e.state=null),t):ye}function Kl(e){return Ko(e,Gl)}var Oa=!0,Si,ki;function Vl(e){if(Oa){var r;for(Si=new _e.Buf32(512),ki=new _e.Buf32(32),r=0;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Zt(Po,e.lens,0,288,Si,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Zt(jo,e.lens,0,32,ki,0,e.work,{bits:5}),Oa=!1}e.lencode=Si,e.lenbits=9,e.distcode=ki,e.distbits=5}function Vo(e,r,t,i){var n,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new _e.Buf8(a.wsize)),i>=a.wsize?(_e.arraySet(a.window,r,t-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),_e.arraySet(a.window,r,t-i,n,a.wnext),i-=n,i?(_e.arraySet(a.window,r,t-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}function Jl(e,r){var t,i,n,a,o,f,d,s,l,g,u,c,v,b,k=0,h,_,m,T,S,L,M,D,z=new _e.Buf8(4),W,I,Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ye;t=e.state,t.mode===$e&&(t.mode=yi),o=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,f=e.avail_in,s=t.hold,l=t.bits,g=f,u=d,D=lt;e:for(;;)switch(t.mode){case Ho:if(t.wrap===0){t.mode=yi;break}for(;l<16;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(t.wrap&2&&s===35615){t.check=0,z[0]=s&255,z[1]=s>>>8&255,t.check=Me(t.check,z,2,0),s=0,l=0,t.mode=sa;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((s&255)<<8)+(s>>8))%31){e.msg="incorrect header check",t.mode=ee;break}if((s&15)!==fa){e.msg="unknown compression method",t.mode=ee;break}if(s>>>=4,l-=4,M=(s&15)+8,t.wbits===0)t.wbits=M;else if(M>t.wbits){e.msg="invalid window size",t.mode=ee;break}t.dmax=1<<M,e.adler=t.check=1,t.mode=s&512?va:$e,s=0,l=0;break;case sa:for(;l<16;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(t.flags=s,(t.flags&255)!==fa){e.msg="unknown compression method",t.mode=ee;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=ee;break}t.head&&(t.head.text=s>>8&1),t.flags&512&&(z[0]=s&255,z[1]=s>>>8&255,t.check=Me(t.check,z,2,0)),s=0,l=0,t.mode=la;case la:for(;l<32;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.head&&(t.head.time=s),t.flags&512&&(z[0]=s&255,z[1]=s>>>8&255,z[2]=s>>>16&255,z[3]=s>>>24&255,t.check=Me(t.check,z,4,0)),s=0,l=0,t.mode=da;case da:for(;l<16;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.head&&(t.head.xflags=s&255,t.head.os=s>>8),t.flags&512&&(z[0]=s&255,z[1]=s>>>8&255,t.check=Me(t.check,z,2,0)),s=0,l=0,t.mode=ua;case ua:if(t.flags&1024){for(;l<16;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.length=s,t.head&&(t.head.extra_len=s),t.flags&512&&(z[0]=s&255,z[1]=s>>>8&255,t.check=Me(t.check,z,2,0)),s=0,l=0}else t.head&&(t.head.extra=null);t.mode=ca;case ca:if(t.flags&1024&&(c=t.length,c>f&&(c=f),c&&(t.head&&(M=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),_e.arraySet(t.head.extra,i,a,c,M)),t.flags&512&&(t.check=Me(t.check,i,c,a)),f-=c,a+=c,t.length-=c),t.length))break e;t.length=0,t.mode=ha;case ha:if(t.flags&2048){if(f===0)break e;c=0;do M=i[a+c++],t.head&&M&&t.length<65536&&(t.head.name+=String.fromCharCode(M));while(M&&c<f);if(t.flags&512&&(t.check=Me(t.check,i,c,a)),f-=c,a+=c,M)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=pa;case pa:if(t.flags&4096){if(f===0)break e;c=0;do M=i[a+c++],t.head&&M&&t.length<65536&&(t.head.comment+=String.fromCharCode(M));while(M&&c<f);if(t.flags&512&&(t.check=Me(t.check,i,c,a)),f-=c,a+=c,M)break e}else t.head&&(t.head.comment=null);t.mode=xa;case xa:if(t.flags&512){for(;l<16;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(s!==(t.check&65535)){e.msg="header crc mismatch",t.mode=ee;break}s=0,l=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=$e;break;case va:for(;l<32;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}e.adler=t.check=Aa(s),s=0,l=0,t.mode=Dr;case Dr:if(t.havedict===0)return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=f,t.hold=s,t.bits=l,jl;e.adler=t.check=1,t.mode=$e;case $e:if(r===$l||r===mr)break e;case yi:if(t.last){s>>>=l&7,l-=l&7,t.mode=Ti;break}for(;l<3;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}switch(t.last=s&1,s>>>=1,l-=1,s&3){case 0:t.mode=_a;break;case 1:if(Vl(t),t.mode=wr,r===mr){s>>>=2,l-=2;break e}break;case 2:t.mode=ga;break;case 3:e.msg="invalid block type",t.mode=ee}s>>>=2,l-=2;break;case _a:for(s>>>=l&7,l-=l&7;l<32;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if((s&65535)!==(s>>>16^65535)){e.msg="invalid stored block lengths",t.mode=ee;break}if(t.length=s&65535,s=0,l=0,t.mode=Ei,r===mr)break e;case Ei:t.mode=ba;case ba:if(c=t.length,c){if(c>f&&(c=f),c>d&&(c=d),c===0)break e;_e.arraySet(n,i,a,c,o),f-=c,a+=c,d-=c,o+=c,t.length-=c;break}t.mode=$e;break;case ga:for(;l<14;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(t.nlen=(s&31)+257,s>>>=5,l-=5,t.ndist=(s&31)+1,s>>>=5,l-=5,t.ncode=(s&15)+4,s>>>=4,l-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=ee;break}t.have=0,t.mode=ma;case ma:for(;t.have<t.ncode;){for(;l<3;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.lens[Q[t.have++]]=s&7,s>>>=3,l-=3}for(;t.have<19;)t.lens[Q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,W={bits:t.lenbits},D=Zt(Ul,t.lens,0,19,t.lencode,0,t.work,W),t.lenbits=W.bits,D){e.msg="invalid code lengths set",t.mode=ee;break}t.have=0,t.mode=wa;case wa:for(;t.have<t.nlen+t.ndist;){for(;k=t.lencode[s&(1<<t.lenbits)-1],h=k>>>24,_=k>>>16&255,m=k&65535,!(h<=l);){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(m<16)s>>>=h,l-=h,t.lens[t.have++]=m;else{if(m===16){for(I=h+2;l<I;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(s>>>=h,l-=h,t.have===0){e.msg="invalid bit length repeat",t.mode=ee;break}M=t.lens[t.have-1],c=3+(s&3),s>>>=2,l-=2}else if(m===17){for(I=h+3;l<I;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}s>>>=h,l-=h,M=0,c=3+(s&7),s>>>=3,l-=3}else{for(I=h+7;l<I;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}s>>>=h,l-=h,M=0,c=11+(s&127),s>>>=7,l-=7}if(t.have+c>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=ee;break}for(;c--;)t.lens[t.have++]=M}}if(t.mode===ee)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=ee;break}if(t.lenbits=9,W={bits:t.lenbits},D=Zt(Po,t.lens,0,t.nlen,t.lencode,0,t.work,W),t.lenbits=W.bits,D){e.msg="invalid literal/lengths set",t.mode=ee;break}if(t.distbits=6,t.distcode=t.distdyn,W={bits:t.distbits},D=Zt(jo,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,W),t.distbits=W.bits,D){e.msg="invalid distances set",t.mode=ee;break}if(t.mode=wr,r===mr)break e;case wr:t.mode=yr;case yr:if(f>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=f,t.hold=s,t.bits=l,Bl(e,u),o=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,f=e.avail_in,s=t.hold,l=t.bits,t.mode===$e&&(t.back=-1);break}for(t.back=0;k=t.lencode[s&(1<<t.lenbits)-1],h=k>>>24,_=k>>>16&255,m=k&65535,!(h<=l);){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(_&&!(_&240)){for(T=h,S=_,L=m;k=t.lencode[L+((s&(1<<T+S)-1)>>T)],h=k>>>24,_=k>>>16&255,m=k&65535,!(T+h<=l);){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}s>>>=T,l-=T,t.back+=T}if(s>>>=h,l-=h,t.back+=h,t.length=m,_===0){t.mode=ka;break}if(_&32){t.back=-1,t.mode=$e;break}if(_&64){e.msg="invalid literal/length code",t.mode=ee;break}t.extra=_&15,t.mode=ya;case ya:if(t.extra){for(I=t.extra;l<I;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.length+=s&(1<<t.extra)-1,s>>>=t.extra,l-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ea;case Ea:for(;k=t.distcode[s&(1<<t.distbits)-1],h=k>>>24,_=k>>>16&255,m=k&65535,!(h<=l);){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(!(_&240)){for(T=h,S=_,L=m;k=t.distcode[L+((s&(1<<T+S)-1)>>T)],h=k>>>24,_=k>>>16&255,m=k&65535,!(T+h<=l);){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}s>>>=T,l-=T,t.back+=T}if(s>>>=h,l-=h,t.back+=h,_&64){e.msg="invalid distance code",t.mode=ee;break}t.offset=m,t.extra=_&15,t.mode=Ta;case Ta:if(t.extra){for(I=t.extra;l<I;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}t.offset+=s&(1<<t.extra)-1,s>>>=t.extra,l-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=ee;break}t.mode=Sa;case Sa:if(d===0)break e;if(c=u-d,t.offset>c){if(c=t.offset-c,c>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=ee;break}c>t.wnext?(c-=t.wnext,v=t.wsize-c):v=t.wnext-c,c>t.length&&(c=t.length),b=t.window}else b=n,v=o-t.offset,c=t.length;c>d&&(c=d),d-=c,t.length-=c;do n[o++]=b[v++];while(--c);t.length===0&&(t.mode=yr);break;case ka:if(d===0)break e;n[o++]=t.length,d--,t.mode=yr;break;case Ti:if(t.wrap){for(;l<32;){if(f===0)break e;f--,s|=i[a++]<<l,l+=8}if(u-=d,e.total_out+=u,t.total+=u,u&&(e.adler=t.check=t.flags?Me(t.check,n,u,o-u):Bi(t.check,n,u,o-u)),u=d,(t.flags?s:Aa(s))!==t.check){e.msg="incorrect data check",t.mode=ee;break}s=0,l=0}t.mode=Ra;case Ra:if(t.wrap&&t.flags){for(;l<32;){if(f===0)break e;f--,s+=i[a++]<<l,l+=8}if(s!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=ee;break}s=0,l=0}t.mode=Ca;case Ca:D=Pl;break e;case ee:D=Wo;break e;case qo:return Zo;case Zl:default:return ye}return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=f,t.hold=s,t.bits=l,(t.wsize||u!==e.avail_out&&t.mode<ee&&(t.mode<Ti||r!==oa))&&Vo(e,e.output,e.next_out,u-e.avail_out),g-=e.avail_in,u-=e.avail_out,e.total_in+=g,e.total_out+=u,t.total+=u,t.wrap&&u&&(e.adler=t.check=t.flags?Me(t.check,n,u,e.next_out-u):Bi(t.check,n,u,e.next_out-u)),e.data_type=t.bits+(t.last?64:0)+(t.mode===$e?128:0)+(t.mode===wr||t.mode===Ei?256:0),(g===0&&u===0||r===oa)&&D===lt&&(D=Wl),D}function Ql(e){if(!e||!e.state)return ye;var r=e.state;return r.window&&(r.window=null),e.state=null,lt}function ed(e,r){var t;return!e||!e.state||(t=e.state,!(t.wrap&2))?ye:(t.head=r,r.done=!1,lt)}function td(e,r){var t=r.length,i,n,a;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==Dr)?ye:i.mode===Dr&&(n=1,n=Bi(n,r,t,0),n!==i.check)?Wo:(a=Vo(e,r,t,t),a?(i.mode=qo,Zo):(i.havedict=1,lt))}Oe.inflateReset=Go;Oe.inflateReset2=Yo;Oe.inflateResetKeep=Xo;Oe.inflateInit=Kl;Oe.inflateInit2=Ko;Oe.inflate=Jl;Oe.inflateEnd=Ql;Oe.inflateGetHeader=ed;Oe.inflateSetDictionary=td;Oe.inflateInfo="pako inflate (from Nodeca project)";var Jo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function rd(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var id=rd,kt=Oe,Ht=We,Or=ct,ie=Jo,Ui=rn,nd=Uo,ad=id,Qo=Object.prototype.toString;function dt(e){if(!(this instanceof dt))return new dt(e);this.options=Ht.assign({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15||(r.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nd,this.strm.avail_out=0;var t=kt.inflateInit2(this.strm,r.windowBits);if(t!==ie.Z_OK)throw new Error(Ui[t]);if(this.header=new ad,kt.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=Or.string2buf(r.dictionary):Qo.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=kt.inflateSetDictionary(this.strm,r.dictionary),t!==ie.Z_OK)))throw new Error(Ui[t])}dt.prototype.push=function(e,r){var t=this.strm,i=this.options.chunkSize,n=this.options.dictionary,a,o,f,d,s,l=!1;if(this.ended)return!1;o=r===~~r?r:r===!0?ie.Z_FINISH:ie.Z_NO_FLUSH,typeof e=="string"?t.input=Or.binstring2buf(e):Qo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new Ht.Buf8(i),t.next_out=0,t.avail_out=i),a=kt.inflate(t,ie.Z_NO_FLUSH),a===ie.Z_NEED_DICT&&n&&(a=kt.inflateSetDictionary(this.strm,n)),a===ie.Z_BUF_ERROR&&l===!0&&(a=ie.Z_OK,l=!1),a!==ie.Z_STREAM_END&&a!==ie.Z_OK)return this.onEnd(a),this.ended=!0,!1;t.next_out&&(t.avail_out===0||a===ie.Z_STREAM_END||t.avail_in===0&&(o===ie.Z_FINISH||o===ie.Z_SYNC_FLUSH))&&(this.options.to==="string"?(f=Or.utf8border(t.output,t.next_out),d=t.next_out-f,s=Or.buf2string(t.output,f),t.next_out=d,t.avail_out=i-d,d&&Ht.arraySet(t.output,t.output,f,d,0),this.onData(s)):this.onData(Ht.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(l=!0)}while((t.avail_in>0||t.avail_out===0)&&a!==ie.Z_STREAM_END);return a===ie.Z_STREAM_END&&(o=ie.Z_FINISH),o===ie.Z_FINISH?(a=kt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===ie.Z_OK):(o===ie.Z_SYNC_FLUSH&&(this.onEnd(ie.Z_OK),t.avail_out=0),!0)};dt.prototype.onData=function(e){this.chunks.push(e)};dt.prototype.onEnd=function(e){e===ie.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ht.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function an(e,r){var t=new dt(r);if(t.push(e,!0),t.err)throw t.msg||Ui[t.err];return t.result}function od(e,r){return r=r||{},r.raw=!0,an(e,r)}lr.Inflate=dt;lr.inflate=an;lr.inflateRaw=od;lr.ungzip=an;var fd=We.assign,sd=or,ld=lr,dd=Jo,ef={};fd(ef,sd,ld,dd);var ud=ef,cd=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",hd=ud,tf=re(),qr=Ee,pd=cd?"uint8array":"array";jr.magic="\b\0";function ht(e,r){qr.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=r,this.meta={}}tf.inherits(ht,qr);ht.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(tf.transformTo(pd,e.data),!1)};ht.prototype.flush=function(){qr.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};ht.prototype.cleanUp=function(){qr.prototype.cleanUp.call(this),this._pako=null};ht.prototype._createPako=function(){this._pako=new hd[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(r){e.push({data:r,meta:e.meta})}};jr.compressWorker=function(e){return new ht("Deflate",e)};jr.uncompressWorker=function(){return new ht("Inflate",{})};var Ia=Ee;Pr.STORE={magic:"\0\0",compressWorker:function(){return new Ia("STORE compression")},uncompressWorker:function(){return new Ia("STORE decompression")}};Pr.DEFLATE=jr;var et={};et.LOCAL_FILE_HEADER="PK";et.CENTRAL_FILE_HEADER="PK";et.CENTRAL_DIRECTORY_END="PK";et.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";et.ZIP64_CENTRAL_DIRECTORY_END="PK";et.DATA_DESCRIPTOR="PK\x07\b";var Et=re(),Lt=Ee,Ri=At,Na=Hi,Lr=et,V=function(e,r){var t="",i;for(i=0;i<r;i++)t+=String.fromCharCode(e&255),e=e>>>8;return t},xd=function(e,r){var t=e;return e||(t=r?16893:33204),(t&65535)<<16},vd=function(e){return(e||0)&63},rf=function(e,r,t,i,n,a){var o=e.file,f=e.compression,d=a!==Ri.utf8encode,s=Et.transformTo("string",a(o.name)),l=Et.transformTo("string",Ri.utf8encode(o.name)),g=o.comment,u=Et.transformTo("string",a(g)),c=Et.transformTo("string",Ri.utf8encode(g)),v=l.length!==o.name.length,b=c.length!==g.length,k,h,_="",m="",T="",S=o.dir,L=o.date,M={crc32:0,compressedSize:0,uncompressedSize:0};(!r||t)&&(M.crc32=e.crc32,M.compressedSize=e.compressedSize,M.uncompressedSize=e.uncompressedSize);var D=0;r&&(D|=8),!d&&(v||b)&&(D|=2048);var z=0,W=0;S&&(z|=16),n==="UNIX"?(W=798,z|=xd(o.unixPermissions,S)):(W=20,z|=vd(o.dosPermissions)),k=L.getUTCHours(),k=k<<6,k=k|L.getUTCMinutes(),k=k<<5,k=k|L.getUTCSeconds()/2,h=L.getUTCFullYear()-1980,h=h<<4,h=h|L.getUTCMonth()+1,h=h<<5,h=h|L.getUTCDate(),v&&(m=V(1,1)+V(Na(s),4)+l,_+="up"+V(m.length,2)+m),b&&(T=V(1,1)+V(Na(u),4)+c,_+="uc"+V(T.length,2)+T);var I="";I+=`
\0`,I+=V(D,2),I+=f.magic,I+=V(k,2),I+=V(h,2),I+=V(M.crc32,4),I+=V(M.compressedSize,4),I+=V(M.uncompressedSize,4),I+=V(s.length,2),I+=V(_.length,2);var Q=Lr.LOCAL_FILE_HEADER+I+s+_,de=Lr.CENTRAL_FILE_HEADER+V(W,2)+I+V(u.length,2)+"\0\0\0\0"+V(z,4)+V(i,4)+s+_+u;return{fileRecord:Q,dirRecord:de}},_d=function(e,r,t,i,n){var a="",o=Et.transformTo("string",n(i));return a=Lr.CENTRAL_DIRECTORY_END+"\0\0\0\0"+V(e,2)+V(e,2)+V(r,4)+V(t,4)+V(o.length,2)+o,a},bd=function(e){var r="";return r=Lr.DATA_DESCRIPTOR+V(e.crc32,4)+V(e.compressedSize,4)+V(e.uncompressedSize,4),r};function Ie(e,r,t,i){Lt.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=r,this.zipPlatform=t,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}Et.inherits(Ie,Lt);Ie.prototype.push=function(e){var r=e.meta.percent||0,t=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,Lt.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(r+100*(t-i-1))/t:100}}))};Ie.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var r=this.streamFiles&&!e.file.dir;if(r){var t=rf(e,r,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0};Ie.prototype.closedSource=function(e){this.accumulate=!1;var r=this.streamFiles&&!e.file.dir,t=rf(e,r,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),r)this.push({data:bd(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};Ie.prototype.flush=function(){for(var e=this.bytesWritten,r=0;r<this.dirRecords.length;r++)this.push({data:this.dirRecords[r],meta:{percent:100}});var t=this.bytesWritten-e,i=_d(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})};Ie.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};Ie.prototype.registerPrevious=function(e){this._sources.push(e);var r=this;return e.on("data",function(t){r.processChunk(t)}),e.on("end",function(){r.closedSource(r.previous.streamInfo),r._sources.length?r.prepareNextSource():r.end()}),e.on("error",function(t){r.error(t)}),this};Ie.prototype.resume=function(){if(!Lt.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};Ie.prototype.error=function(e){var r=this._sources;if(!Lt.prototype.error.call(this,e))return!1;for(var t=0;t<r.length;t++)try{r[t].error(e)}catch{}return!0};Ie.prototype.lock=function(){Lt.prototype.lock.call(this);for(var e=this._sources,r=0;r<e.length;r++)e[r].lock()};var gd=Ie,md=Pr,wd=gd,yd=function(e,r){var t=e||r,i=md[t];if(!i)throw new Error(t+" is not a valid compression method !");return i};ho.generateWorker=function(e,r,t){var i=new wd(r.streamFiles,t,r.platform,r.encodeFileName),n=0;try{e.forEach(function(a,o){n++;var f=yd(o.options.compression,r.compression),d=o.options.compressionOptions||r.compressionOptions||{},s=o.dir,l=o.date;o._compressWorker(f,d).withStreamInfo("file",{name:a,dir:s,date:l,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(i)}),i.entriesCount=n}catch(a){i.error(a)}return i};var Ed=re(),Xr=Ee;function dr(e,r){Xr.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(r)}Ed.inherits(dr,Xr);dr.prototype._bindStream=function(e){var r=this;this._stream=e,e.pause(),e.on("data",function(t){r.push({data:t,meta:{percent:0}})}).on("error",function(t){r.isPaused?this.generatedError=t:r.error(t)}).on("end",function(){r.isPaused?r._upstreamEnded=!0:r.end()})};dr.prototype.pause=function(){return Xr.prototype.pause.call(this)?(this._stream.pause(),!0):!1};dr.prototype.resume=function(){return Xr.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};var Td=dr,Sd=At,qt=re(),nf=Ee,kd=fo,af=Te,Da=Ki,Rd=gs,Cd=ho,La=Br,Ad=Td,of=function(e,r,t){var i=qt.getTypeOf(r),n,a=qt.extend(t||{},af);a.date=a.date||new Date,a.compression!==null&&(a.compression=a.compression.toUpperCase()),typeof a.unixPermissions=="string"&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&a.unixPermissions&16384&&(a.dir=!0),a.dosPermissions&&a.dosPermissions&16&&(a.dir=!0),a.dir&&(e=ff(e)),a.createFolders&&(n=Od(e))&&sf.call(this,n,!0);var o=i==="string"&&a.binary===!1&&a.base64===!1;(!t||typeof t.binary>"u")&&(a.binary=!o);var f=r instanceof Da&&r.uncompressedSize===0;(f||a.dir||!r||r.length===0)&&(a.base64=!1,a.binary=!0,r="",a.compression="STORE",i="string");var d=null;r instanceof Da||r instanceof nf?d=r:La.isNode&&La.isStream(r)?d=new Ad(e,r):d=qt.prepareContent(e,r,a.binary,a.optimizedBinaryString,a.base64);var s=new Rd(e,d,a);this.files[e]=s},Od=function(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));var r=e.lastIndexOf("/");return r>0?e.substring(0,r):""},ff=function(e){return e.slice(-1)!=="/"&&(e+="/"),e},sf=function(e,r){return r=typeof r<"u"?r:af.createFolders,e=ff(e),this.files[e]||of.call(this,e,null,{dir:!0,createFolders:r}),this.files[e]};function Ma(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var Id={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var r,t,i;for(r in this.files)i=this.files[r],t=r.slice(this.root.length,r.length),t&&r.slice(0,this.root.length)===this.root&&e(t,i)},filter:function(e){var r=[];return this.forEach(function(t,i){e(t,i)&&r.push(i)}),r},file:function(e,r,t){if(arguments.length===1)if(Ma(e)){var i=e;return this.filter(function(a,o){return!o.dir&&i.test(a)})}else{var n=this.files[this.root+e];return n&&!n.dir?n:null}else e=this.root+e,of.call(this,e,r,t);return this},folder:function(e){if(!e)return this;if(Ma(e))return this.filter(function(n,a){return a.dir&&e.test(n)});var r=this.root+e,t=sf.call(this,r),i=this.clone();return i.root=t.name,i},remove:function(e){e=this.root+e;var r=this.files[e];if(r||(e.slice(-1)!=="/"&&(e+="/"),r=this.files[e]),r&&!r.dir)delete this.files[e];else for(var t=this.filter(function(n,a){return a.name.slice(0,e.length)===e}),i=0;i<t.length;i++)delete this.files[t[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var r,t={};try{if(t=qt.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:Sd.utf8encode}),t.type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),t.type==="binarystring"&&(t.type="string"),!t.type)throw new Error("No output type specified.");qt.checkSupport(t.type),(t.platform==="darwin"||t.platform==="freebsd"||t.platform==="linux"||t.platform==="sunos")&&(t.platform="UNIX"),t.platform==="win32"&&(t.platform="DOS");var i=t.comment||this.comment||"";r=Cd.generateWorker(this,t,i)}catch(n){r=new nf("error"),r.error(n)}return new kd(r,t.type||"string",t.mimeType)},generateAsync:function(e,r){return this.generateInternalStream(e).accumulate(r)},generateNodeStream:function(e,r){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(r)}},Nd=Id,Dd=re();function lf(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}lf.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var r=0,t;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return Dd.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))}};var df=lf,uf=df,Ld=re();function Mt(e){uf.call(this,e);for(var r=0;r<this.data.length;r++)e[r]=e[r]&255}Ld.inherits(Mt,uf);Mt.prototype.byteAt=function(e){return this.data[this.zero+e]};Mt.prototype.lastIndexOfSignature=function(e){for(var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===r&&this.data[a+1]===t&&this.data[a+2]===i&&this.data[a+3]===n)return a-this.zero;return-1};Mt.prototype.readAndCheckSignature=function(e){var r=e.charCodeAt(0),t=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.readData(4);return r===a[0]&&t===a[1]&&i===a[2]&&n===a[3]};Mt.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};var cf=Mt,hf=df,Md=re();function Ft(e){hf.call(this,e)}Md.inherits(Ft,hf);Ft.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};Ft.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};Ft.prototype.readAndCheckSignature=function(e){var r=this.readData(4);return e===r};Ft.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};var Fd=Ft,pf=cf,zd=re();function on(e){pf.call(this,e)}zd.inherits(on,pf);on.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var r=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};var xf=on,vf=xf,Bd=re();function fn(e){vf.call(this,e)}Bd.inherits(fn,vf);fn.prototype.readData=function(e){this.checkOffset(e);var r=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,r};var Ud=fn,Er=re(),Fa=oe,$d=cf,Pd=Fd,jd=Ud,Wd=xf,_f=function(e){var r=Er.getTypeOf(e);return Er.checkSupport(r),r==="string"&&!Fa.uint8array?new Pd(e):r==="nodebuffer"?new jd(e):Fa.uint8array?new Wd(Er.transformTo("uint8array",e)):new $d(Er.transformTo("array",e))},Ci=_f,qe=re(),Zd=Ki,za=Hi,Tr=At,Sr=Pr,Hd=oe,qd=0,Xd=3,Gd=function(e){for(var r in Sr)if(Object.prototype.hasOwnProperty.call(Sr,r)&&Sr[r].magic===e)return Sr[r];return null};function bf(e,r){this.options=e,this.loadOptions=r}bf.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(e){var r,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(r=Gd(this.compressionMethod),r===null)throw new Error("Corrupted zip : compression "+qe.pretty(this.compressionMethod)+" unknown (inner file : "+qe.transformTo("string",this.fileName)+")");this.decompressed=new Zd(this.compressedSize,this.uncompressedSize,this.crc32,r,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var r=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(r),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),e===qd&&(this.dosPermissions=this.externalFileAttributes&63),e===Xd&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=Ci(this.extraFields[1].value);this.uncompressedSize===qe.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===qe.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===qe.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===qe.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var r=e.index+this.extraFieldsLength,t,i,n;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[t]={id:t,length:i,value:n};e.setIndex(r)},handleUTF8:function(){var e=Hd.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Tr.utf8decode(this.fileName),this.fileCommentStr=Tr.utf8decode(this.fileComment);else{var r=this.findExtraFieldUnicodePath();if(r!==null)this.fileNameStr=r;else{var t=qe.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var i=this.findExtraFieldUnicodeComment();if(i!==null)this.fileCommentStr=i;else{var n=qe.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var r=Ci(e.value);return r.readInt(1)!==1||za(this.fileName)!==r.readInt(4)?null:Tr.utf8decode(r.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var r=Ci(e.value);return r.readInt(1)!==1||za(this.fileComment)!==r.readInt(4)?null:Tr.utf8decode(r.readData(e.length-5))}return null}};var Yd=bf,Kd=_f,Pe=re(),ke=et,Vd=Yd,Jd=oe;function gf(e){this.files=[],this.loadOptions=e}gf.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Pe.pretty(r)+", expected "+Pe.pretty(e)+")")}},isSignature:function(e,r){var t=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4),n=i===r;return this.reader.setIndex(t),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),r=Jd.uint8array?"uint8array":"array",t=Pe.transformTo(r,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,r=0,t,i,n;r<e;)t=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readData(i),this.zip64ExtensibleData[t]={id:t,length:i,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,r;for(e=0;e<this.files.length;e++)r=this.files[e],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(ke.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ke.CENTRAL_FILE_HEADER);)e=new Vd({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(ke.CENTRAL_DIRECTORY_END);if(e<0){var r=!this.isSignature(0,ke.LOCAL_FILE_HEADER);throw r?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(e);var t=e;if(this.checkSignature(ke.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Pe.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Pe.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Pe.MAX_VALUE_16BITS||this.centralDirRecords===Pe.MAX_VALUE_16BITS||this.centralDirSize===Pe.MAX_VALUE_32BITS||this.centralDirOffset===Pe.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(ke.ZIP64_CENTRAL_DIRECTORY_LOCATOR),e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(ke.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ke.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ke.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ke.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=t-i;if(n>0)this.isSignature(t,ke.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=Kd(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var Qd=gf,Ai=re(),Ir=ar,e0=At,t0=Qd,r0=co,Ba=Br;function i0(e){return new Ir.Promise(function(r,t){var i=e.decompressed.getContentWorker().pipe(new r0);i.on("error",function(n){t(n)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):r()}).resume()})}var n0=function(e,r){var t=this;return r=Ai.extend(r||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:e0.utf8decode}),Ba.isNode&&Ba.isStream(e)?Ir.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):Ai.prepareContent("the loaded zip file",e,!0,r.optimizedBinaryString,r.base64).then(function(i){var n=new t0(r);return n.load(i),n}).then(function(n){var a=[Ir.Promise.resolve(n)],o=n.files;if(r.checkCRC32)for(var f=0;f<o.length;f++)a.push(i0(o[f]));return Ir.Promise.all(a)}).then(function(n){for(var a=n.shift(),o=a.files,f=0;f<o.length;f++){var d=o[f],s=d.fileNameStr,l=Ai.resolve(d.fileNameStr);t.file(l,d.decompressed,{binary:!0,optimizedBinaryString:!0,date:d.date,dir:d.dir,comment:d.fileCommentStr.length?d.fileCommentStr:null,unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions,createFolders:r.createFolders}),d.dir||(t.file(l).unsafeOriginalName=s)}return a.zipComment.length&&(t.comment=a.zipComment),t})};function we(){if(!(this instanceof we))return new we;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new we;for(var r in this)typeof this[r]!="function"&&(e[r]=this[r]);return e}}we.prototype=Nd;we.prototype.loadAsync=n0;we.support=oe;we.defaults=Te;we.version="3.10.1";we.loadAsync=function(e,r){return new we().loadAsync(e,r)};we.external=ar;var a0=we,Xt=tr,mf=rr,wf=parseInt("0777",8),o0=Rt.mkdirp=Rt.mkdirP=Rt;function Rt(e,r,t,i){typeof r=="function"?(t=r,r={}):(!r||typeof r!="object")&&(r={mode:r});var n=r.mode,a=r.fs||mf;n===void 0&&(n=wf),i||(i=null);var o=t||function(){};e=Xt.resolve(e),a.mkdir(e,n,function(f){if(!f)return i=i||e,o(null,i);switch(f.code){case"ENOENT":if(Xt.dirname(e)===e)return o(f);Rt(Xt.dirname(e),r,function(d,s){d?o(d,s):Rt(e,r,o,s)});break;default:a.stat(e,function(d,s){d||!s.isDirectory()?o(f,i):o(null,i)});break}})}Rt.sync=function e(r,t,i){(!t||typeof t!="object")&&(t={mode:t});var n=t.mode,a=t.fs||mf;n===void 0&&(n=wf),i||(i=null),r=Xt.resolve(r);try{a.mkdirSync(r,n),i=i||r}catch(f){switch(f.code){case"ENOENT":i=e(Xt.dirname(r),t,i),e(r,t,i);break;default:var o;try{o=a.statSync(r)}catch{throw f}if(!o.isDirectory())throw f;break}}return i};var yf={exports:{}};(function(){var e,r=null,t=typeof window=="object"?window:le,i=!1,n=t.process,a=Array,o=Error,f=0,d=1,s=2,l="Symbol",g="iterator",u="species",c=l+"("+u+")",v="return",b="_uh",k="_pt",h="_st",_="Invalid this",m="Invalid argument",T=`
From previous `,S="Chaining cycle detected for promise",L="Uncaught (in promise)",M="rejectionHandled",D="unhandledRejection",z,W,I={e:r},Q=function(){},de=/^.+\/node_modules\/yaku\/.+\n?/mg,Z=yf.exports=function(R){var O=this,F;if(!y(O)||O._s!==e)throw he(_);if(O._s=s,i&&(O[k]=p()),R!==Q){if(!w(R))throw he(m);F=ne(R)(j(O,d),j(O,f)),F===I&&ae(O,f,F.e)}};Z.default=Z,Ze(Z,{then:function(R,O){if(this._s===void 0)throw he();return pt(this,B(Z.speciesConstructor(this,Z)),R,O)},catch:function(E){return this.then(e,E)},_pCount:0,_pre:r,_Yaku:1}),Z.resolve=function(R){return q(R)?R:tt(B(this),R)},Z.reject=function(R){return ae(B(this),f,R)},Z.race=function(R){var O=this,F=B(O),J=function(be){ae(F,d,be)},K=function(be){ae(F,f,be)},De=ne(Ne)(R,function(be){O.resolve(be).then(J,K)});return De===I?O.reject(De.e):F},Z.all=function(R){var O=this,F=B(O),J=[],K;function De(be){ae(F,f,be)}return K=ne(Ne)(R,function(be,Mf){O.resolve(be).then(function(Ff){J[Mf]=Ff,--K||ae(F,d,J)},De)}),K===I?O.reject(K.e):(K||ae(F,d,[]),F)},Z.Symbol=t[l]||{},ne(function(){Object.defineProperty(Z,Ue(),{get:function(){return this}})})(),Z.speciesConstructor=function(E,R){var O=E.constructor;return O&&O[Ue()]||R},Z.unhandledRejection=function(E,R){try{t.console.error(L,i?R.longStack:zt(E,R))}catch{}},Z.rejectionHandled=Q,Z.enableLongStackTrace=function(){i=!0},Z.nextTick=n?n.nextTick:function(E){setTimeout(E)},Z._Yaku=1;function Ue(){return Z[l][u]||c}function Ze(E,R){for(var O in R)E.prototype[O]=R[O];return E}function y(E){return E&&typeof E=="object"}function w(E){return typeof E=="function"}function A(E,R){return E instanceof R}function U(E){return A(E,o)}function H(E,R,O){if(!R(E))throw he(O)}function Y(){try{return z.apply(W,arguments)}catch(E){return I.e=E,I}}function ne(E,R){return z=E,W=R,Y}function xe(E,R){var O=a(E),F=0;function J(){for(var K=0;K<F;)R(O[K],O[K+1]),O[K++]=e,O[K++]=e;F=0,O.length>E&&(O.length=E)}return function(K,De){O[F++]=K,O[F++]=De,F===2&&Z.nextTick(J)}}function Ne(E,R){var O,F=0,J,K,De;if(!E)throw he(m);var be=E[Z[l][g]];if(w(be))J=be.call(E);else if(w(E.next))J=E;else if(A(E,a)){for(O=E.length;F<O;)R(E[F],F++);return F}else throw he(m);for(;!(K=J.next()).done;)if(De=ne(R)(K.value,F++),De===I)throw w(J[v])&&J[v](),De.e;return F}function he(E){return new TypeError(E)}function p(E){return(E?"":T)+new o().stack}var x=xe(999,function(E,R){var O,F;if(F=E._s?R._onFulfilled:R._onRejected,F===e){ae(R,E._s,E._v);return}if(O=ne(Yr)(F,E._v),O===I){ae(R,f,O.e);return}tt(R,O)}),C=xe(9,function(E){xt(E)||(E[b]=1,N(D,E))});function N(E,R){var O="on"+E.toLowerCase(),F=t[O];n&&n.listeners(E).length?E===D?n.emit(E,R._v,R):n.emit(E,R):F?F({reason:R._v,promise:R}):Z[E](R._v,R)}function q(E){return E&&E._Yaku}function B(E){if(q(E))return new E(Q);var R,O,F;return R=new E(function(J,K){if(R)throw he();O=J,F=K}),H(O,w),H(F,w),R}function j(E,R){return function(O){i&&(E[h]=p(!0)),R===d?tt(E,O):ae(E,R,O)}}function pt(E,R,O,F){return w(O)&&(R._onFulfilled=O),w(F)&&(E[b]&&N(M,E),R._onRejected=F),i&&(R._pre=E),E[E._pCount++]=R,E._s!==s&&x(E,R),R}function xt(E){if(E._umark)return!0;E._umark=!0;for(var R=0,O=E._pCount,F;R<O;)if(F=E[R++],F._onRejected||xt(F))return!0}function zt(E,R){var O=[];function F(J){return O.push(J.replace(/^\s+|\s+$/g,""))}return i&&(R[h]&&F(R[h]),function J(K){K&&k in K&&(J(K._next),F(K[k]+""),J(K._pre))}(R)),(E&&E.stack?E.stack:E)+(`
`+O.join(`
`)).replace(de,"")}function Yr(E,R){return E(R)}function ae(E,R,O){var F=0,J=E._pCount;if(E._s===s)for(E._s=R,E._v=O,R===f&&(i&&U(O)&&(O.longStack=zt(O,E)),C(E));F<J;)x(E,E[F++]);return E}function tt(E,R){if(R===E&&R)return ae(E,f,he(S)),E;if(R!==r&&(w(R)||y(R))){var O=ne(Bt)(R);if(O===I)return ae(E,f,O.e),E;w(O)?(i&&q(R)&&(E._next=R),q(R)?vt(E,R,O):Z.nextTick(function(){vt(E,R,O)})):ae(E,d,R)}else ae(E,d,R);return E}function Bt(E){return E.then}function vt(E,R,O){var F=ne(O,R)(function(J){R&&(R=r,tt(E,J))},function(J){R&&(R=r,ae(E,f,J))});F===I&&R&&(ae(E,f,F.e),R=r)}})();var f0=yf.exports,s0=f0,l0={isFunction:function(e){return typeof e=="function"},Promise:s0},Ef=l0,gt=Ef.isFunction,d0=function(e,r){return function(t,i,n,a,o){var f=arguments.length,d,s,l,g;s=new Ef.Promise(function(v,b){l=v,g=b});function u(v,b){v==null?l(b):g(v)}switch(f){case 0:e.call(r,u);break;case 1:gt(t)?e.call(r,t):e.call(r,t,u);break;case 2:gt(i)?e.call(r,t,i):e.call(r,t,i,u);break;case 3:gt(n)?e.call(r,t,i,n):e.call(r,t,i,n,u);break;case 4:gt(a)?e.call(r,t,i,n,a):e.call(r,t,i,n,a,u);break;case 5:gt(o)?e.call(r,t,i,n,a,o):e.call(r,t,i,n,a,o,u);break;default:d=new Array(f);for(var c=0;c<f;c++)d[c]=arguments[c];if(gt(d[f-1]))return e.apply(r,d);d[c]=u,e.apply(r,d)}return s}},Tf=rr,rt=tr,u0=a0,c0=o0,sn=d0,h0=sn(Tf.writeFile),p0=sn(Tf.readFile),x0=sn(c0);function v0(e){function r(s,l,g,u){var c=0;return c+=s,c+=l<<8,c+=g<<16,c+=u<<24,c}if(e[0]===80&&e[1]===75&&e[2]===3&&e[3]===4)return e;if(e[0]!==67||e[1]!==114||e[2]!==50||e[3]!==52)throw new Error("Invalid header: Does not start with Cr24");var t=e[4]===3,i=e[4]===2;if(!i&&!t||e[5]||e[6]||e[7])throw new Error("Unexpected crx format version number.");if(i){var n=r(e[8],e[9],e[10],e[11]),a=r(e[12],e[13],e[14],e[15]),o=16+n+a;return e.slice(o,e.length)}var f=r(e[8],e[9],e[10],e[11]),d=12+f;return e.slice(d,e.length)}function _0(e,r){var t=rt.resolve(e),i=rt.extname(e),n=rt.basename(e,i),a=rt.dirname(e);return r=r||rt.resolve(a,n),p0(t).then(function(o){return u0.loadAsync(v0(o))}).then(function(o){var f=Object.keys(o.files);return Promise.all(f.map(function(d){var s=!o.files[d].dir,l=rt.join(r,d),g=s&&rt.dirname(l)||l,u=o.files[d].async("nodebuffer");return x0(g).then(function(){return s?u:!1}).then(function(c){return c?h0(l,c):!0})}))})}var b0=_0;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.downloadChromeExtension=void 0;const r=rr,t=tr,i=Ga,n=b0,a=async(o,{forceDownload:f=!1,attempts:d=5}={})=>{const s=(0,i.getPath)();r.existsSync(s)||await r.promises.mkdir(s,{recursive:!0});const l=t.resolve(`${s}/${o}`);if(!r.existsSync(l)||f){r.existsSync(l)&&await r.promises.rmdir(l,{recursive:!0});const g=`https://clients2.google.com/service/update2/crx?response=redirect&acceptformat=crx2,crx3&x=id%3D${o}%26uc&prodversion=${process.versions.chrome}`,u=t.resolve(`${l}.crx`);try{await(0,i.downloadFile)(g,u);try{return await n(u,l),(0,i.changePermissions)(l,755),l}catch(c){if(!r.existsSync(t.resolve(l,"manifest.json")))throw c}}catch(c){if(console.error(`Failed to fetch extension, trying ${d-1} more times`),d<=1)throw c;return await new Promise(v=>setTimeout(v,200)),await(0,e.downloadChromeExtension)(o,{forceDownload:f,attempts:d-1})}}return l};e.downloadChromeExtension=a})(Xa);Object.defineProperty(fe,"__esModule",{value:!0});fe.MOBX_DEVTOOLS=fe.REDUX_DEVTOOLS=fe.VUEJS_DEVTOOLS_BETA=fe.VUEJS_DEVTOOLS=fe.JQUERY_DEBUGGER=fe.BACKBONE_DEBUGGER=Sf=fe.REACT_DEVELOPER_TOOLS=fe.EMBER_INSPECTOR=void 0;var g0=fe.installExtension=ln;const m0=P,w0=Xa;async function ln(e,r={}){const{forceDownload:t,loadExtensionOptions:i,session:n}=r,a=n||m0.session.defaultSession;if(process.type!=="browser")return Promise.reject(new Error("electron-devtools-installer can only be used from the main process"));if(Array.isArray(e))return e.reduce((s,l)=>s.then(async g=>{const u=await ln(l,r);return[...g,u]}),Promise.resolve([]));let o;if(typeof e=="object"&&e.id)o=e.id;else if(typeof e=="string")o=e;else throw new Error(`Invalid extensionReference passed in: "${e}"`);const f=a.getAllExtensions().find(s=>s.id===o);if(!t&&f)return f;const d=await(0,w0.downloadChromeExtension)(o,{forceDownload:t||!1});if(f!=null&&f.id){const s=new Promise(l=>{const g=(u,c)=>{c.id===f.id&&(a.removeListener("extension-unloaded",g),l())};a.on("extension-unloaded",g)});a.removeExtension(f.id),await s}return a.loadExtension(d,i)}fe.default=ln;fe.EMBER_INSPECTOR={id:"bmdblncegkenkacieihfhpjfppoconhi"};var Sf=fe.REACT_DEVELOPER_TOOLS={id:"fmkadmapgofadopljbjfkapdkoienihi"};fe.BACKBONE_DEBUGGER={id:"bhljhndlimiafopmmhjlgfpnnchjjbhd"};fe.JQUERY_DEBUGGER={id:"dbhhnnnpaeobfddmlalhnehgclcmjimi"};fe.VUEJS_DEVTOOLS={id:"nhdogjmejiglipccpnnnanhbledajbpd"};fe.VUEJS_DEVTOOLS_BETA={id:"ljjemllljcmogpfapbkkighbhhppjdbg"};fe.REDUX_DEVTOOLS={id:"lmhkpmbekcpmknklioeibfkpmmfibljd"};fe.MOBX_DEVTOOLS={id:"pfgnfdagidkfgccljigdamigbcnndkod"};var $i=null;function y0(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return $f.randomBytes(e)}catch{}if(!$i)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return $i(e)}function E0(e){$i=e}function dn(e,r){if(e=e||un,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof r);e<4?e=4:e>31&&(e=31);var t=[];return t.push("$2b$"),e<10&&t.push("0"),t.push(e.toString()),t.push("$"),t.push(Mr(y0(Qt),Qt)),t.join("")}function kf(e,r,t){if(typeof r=="function"&&(t=r,r=void 0),typeof e=="function"&&(t=e,e=void 0),typeof e>"u")e=un;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function i(n){Ce(function(){try{n(null,dn(e))}catch(a){n(a)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);i(t)}else return new Promise(function(n,a){i(function(o,f){if(o){a(o);return}n(f)})})}function Rf(e,r){if(typeof r>"u"&&(r=un),typeof r=="number"&&(r=dn(r)),typeof e!="string"||typeof r!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof r);return Pi(e,r)}function Cf(e,r,t,i){function n(a){typeof e=="string"&&typeof r=="number"?kf(r,function(o,f){Pi(e,f,a,i)}):typeof e=="string"&&typeof r=="string"?Pi(e,r,a,i):Ce(a.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof r)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);n(t)}else return new Promise(function(a,o){n(function(f,d){if(f){o(f);return}a(d)})})}function Af(e,r){for(var t=e.length^r.length,i=0;i<e.length;++i)t|=e.charCodeAt(i)^r.charCodeAt(i);return t===0}function T0(e,r){if(typeof e!="string"||typeof r!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof r);return r.length!==60?!1:Af(Rf(e,r.substring(0,r.length-31)),r)}function S0(e,r,t,i){function n(a){if(typeof e!="string"||typeof r!="string"){Ce(a.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof r)));return}if(r.length!==60){Ce(a.bind(this,null,!1));return}Cf(e,r.substring(0,29),function(o,f){o?a(o):a(null,Af(f,r))},i)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);n(t)}else return new Promise(function(a,o){n(function(f,d){if(f){o(f);return}a(d)})})}function k0(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)}function R0(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);if(e.length!==60)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)}function C0(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return Of(e)>72}var Ce=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function Of(e){for(var r=0,t=0,i=0;i<e.length;++i)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:(t&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r}function A0(e){for(var r=0,t,i,n=new Array(Of(e)),a=0,o=e.length;a<o;++a)t=e.charCodeAt(a),t<128?n[r++]=t:t<2048?(n[r++]=t>>6|192,n[r++]=t&63|128):(t&64512)===55296&&((i=e.charCodeAt(a+1))&64512)===56320?(t=65536+((t&1023)<<10)+(i&1023),++a,n[r++]=t>>18|240,n[r++]=t>>12&63|128,n[r++]=t>>6&63|128,n[r++]=t&63|128):(n[r++]=t>>12|224,n[r++]=t>>6&63|128,n[r++]=t&63|128);return n}var mt="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Xe=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Mr(e,r){var t=0,i=[],n,a;if(r<=0||r>e.length)throw Error("Illegal len: "+r);for(;t<r;){if(n=e[t++]&255,i.push(mt[n>>2&63]),n=(n&3)<<4,t>=r){i.push(mt[n&63]);break}if(a=e[t++]&255,n|=a>>4&15,i.push(mt[n&63]),n=(a&15)<<2,t>=r){i.push(mt[n&63]);break}a=e[t++]&255,n|=a>>6&3,i.push(mt[n&63]),i.push(mt[a&63])}return i.join("")}function If(e,r){var t=0,i=e.length,n=0,a=[],o,f,d,s,l,g;if(r<=0)throw Error("Illegal len: "+r);for(;t<i-1&&n<r&&(g=e.charCodeAt(t++),o=g<Xe.length?Xe[g]:-1,g=e.charCodeAt(t++),f=g<Xe.length?Xe[g]:-1,!(o==-1||f==-1||(l=o<<2>>>0,l|=(f&48)>>4,a.push(String.fromCharCode(l)),++n>=r||t>=i)||(g=e.charCodeAt(t++),d=g<Xe.length?Xe[g]:-1,d==-1)||(l=(f&15)<<4>>>0,l|=(d&60)>>2,a.push(String.fromCharCode(l)),++n>=r||t>=i)));)g=e.charCodeAt(t++),s=g<Xe.length?Xe[g]:-1,l=(d&3)<<6>>>0,l|=s,a.push(String.fromCharCode(l)),++n;var u=[];for(t=0;t<n;t++)u.push(a[t].charCodeAt(0));return u}var Qt=16,un=10,O0=16,I0=100,Ua=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],$a=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Nf=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function er(e,r,t,i){var n,a=e[r],o=e[r+1];return a^=t[0],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[1],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[2],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[3],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[4],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[5],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[6],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[7],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[8],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[9],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[10],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[11],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[12],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[13],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[14],n=i[a>>>24],n+=i[256|a>>16&255],n^=i[512|a>>8&255],n+=i[768|a&255],o^=n^t[15],n=i[o>>>24],n+=i[256|o>>16&255],n^=i[512|o>>8&255],n+=i[768|o&255],a^=n^t[16],e[r]=o^t[O0+1],e[r+1]=a,e}function wt(e,r){for(var t=0,i=0;t<4;++t)i=i<<8|e[r]&255,r=(r+1)%e.length;return{key:i,offp:r}}function Pa(e,r,t){for(var i=0,n=[0,0],a=r.length,o=t.length,f,d=0;d<a;d++)f=wt(e,i),i=f.offp,r[d]=r[d]^f.key;for(d=0;d<a;d+=2)n=er(n,0,r,t),r[d]=n[0],r[d+1]=n[1];for(d=0;d<o;d+=2)n=er(n,0,r,t),t[d]=n[0],t[d+1]=n[1]}function N0(e,r,t,i){for(var n=0,a=[0,0],o=t.length,f=i.length,d,s=0;s<o;s++)d=wt(r,n),n=d.offp,t[s]=t[s]^d.key;for(n=0,s=0;s<o;s+=2)d=wt(e,n),n=d.offp,a[0]^=d.key,d=wt(e,n),n=d.offp,a[1]^=d.key,a=er(a,0,t,i),t[s]=a[0],t[s+1]=a[1];for(s=0;s<f;s+=2)d=wt(e,n),n=d.offp,a[0]^=d.key,d=wt(e,n),n=d.offp,a[1]^=d.key,a=er(a,0,t,i),i[s]=a[0],i[s+1]=a[1]}function ja(e,r,t,i,n){var a=Nf.slice(),o=a.length,f;if(t<4||t>31)if(f=Error("Illegal number of rounds (4-31): "+t),i){Ce(i.bind(this,f));return}else throw f;if(r.length!==Qt)if(f=Error("Illegal salt length: "+r.length+" != "+Qt),i){Ce(i.bind(this,f));return}else throw f;t=1<<t>>>0;var d,s,l=0,g;typeof Int32Array=="function"?(d=new Int32Array(Ua),s=new Int32Array($a)):(d=Ua.slice(),s=$a.slice()),N0(r,e,d,s);function u(){if(n&&n(l/t),l<t)for(var v=Date.now();l<t&&(l=l+1,Pa(e,d,s),Pa(r,d,s),!(Date.now()-v>I0)););else{for(l=0;l<64;l++)for(g=0;g<o>>1;g++)er(a,g<<1,d,s);var b=[];for(l=0;l<o;l++)b.push((a[l]>>24&255)>>>0),b.push((a[l]>>16&255)>>>0),b.push((a[l]>>8&255)>>>0),b.push((a[l]&255)>>>0);if(i){i(null,b);return}else return b}i&&Ce(u)}if(typeof i<"u")u();else for(var c;;)if(typeof(c=u())<"u")return c||[]}function Pi(e,r,t,i){var n;if(typeof e!="string"||typeof r!="string")if(n=Error("Invalid string / salt: Not a string"),t){Ce(t.bind(this,n));return}else throw n;var a,o;if(r.charAt(0)!=="$"||r.charAt(1)!=="2")if(n=Error("Invalid salt version: "+r.substring(0,2)),t){Ce(t.bind(this,n));return}else throw n;if(r.charAt(2)==="$")a="\0",o=3;else{if(a=r.charAt(2),a!=="a"&&a!=="b"&&a!=="y"||r.charAt(3)!=="$")if(n=Error("Invalid salt revision: "+r.substring(2,4)),t){Ce(t.bind(this,n));return}else throw n;o=4}if(r.charAt(o+2)>"$")if(n=Error("Missing salt rounds"),t){Ce(t.bind(this,n));return}else throw n;var f=parseInt(r.substring(o,o+1),10)*10,d=parseInt(r.substring(o+1,o+2),10),s=f+d,l=r.substring(o+3,o+25);e+=a>="a"?"\0":"";var g=A0(e),u=If(l,Qt);function c(v){var b=[];return b.push("$2"),a>="a"&&b.push(a),b.push("$"),s<10&&b.push("0"),b.push(s.toString()),b.push("$"),b.push(Mr(u,u.length)),b.push(Mr(v,Nf.length*4-1)),b.join("")}if(typeof t>"u")return c(ja(g,u,s));ja(g,u,s,function(v,b){v?t(v,null):t(null,c(b))},i)}function D0(e,r){return Mr(e,r)}function L0(e,r){return If(e,r)}const Gr={setRandomFallback:E0,genSaltSync:dn,genSalt:kf,hashSync:Rf,hash:Cf,compareSync:T0,compare:S0,getRounds:k0,getSalt:R0,truncates:C0,encodeBase64:D0,decodeBase64:L0},Df=process.env.NODE_ENV==="development",M0=Re.join(P.app.getPath("userData"),"quickballot.db"),$=new Uf(M0);$.pragma("journal_mode = WAL");$.prepare(`
  CREATE TABLE IF NOT EXISTS organizations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    logo TEXT,
    password TEXT NOT NULL,
    recovery_phrase TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
  )
`).run();$.prepare(`
  CREATE TABLE IF NOT EXISTS elections (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    organization_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    status TEXT,
    logo TEXT,
    positions TEXT,
    start_time DATETIME,
    end_time DATETIME,
    type TEXT,
    active_positions TEXT,
    session_id TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE CASCADE
  )
`).run();$.prepare(`
  CREATE TABLE IF NOT EXISTS voters (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    organization_id INTEGER NOT NULL,
    name TEXT NOT NULL,
    voter_id TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE CASCADE
  )
`).run();try{$.prepare(`
    ALTER TABLE voters ADD COLUMN voter_id TEXT
  `).run()}catch{console.log("voter_id column already exists or could not be added")}$.prepare(`
  CREATE TABLE IF NOT EXISTS candidates (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    organization_id INTEGER NOT NULL,
    position TEXT NOT NULL,
    name TEXT NOT NULL,
    symbol TEXT NOT NULL,
    photo TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE CASCADE
  )
`).run();$.prepare(`
  CREATE TABLE IF NOT EXISTS votes (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    election_id INTEGER NOT NULL,
    organization_id INTEGER NOT NULL,
    votes TEXT NOT NULL,
    election_type TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (election_id) REFERENCES elections(id) ON DELETE CASCADE,
    FOREIGN KEY (organization_id) REFERENCES organizations(id) ON DELETE CASCADE
  )
`).run();function Se(e,r,t){$.prepare(`PRAGMA table_info(${e})`).all().some(n=>n.name===r)||$.prepare(`ALTER TABLE ${e} ADD COLUMN ${r} ${t}`).run()}Se("elections","logo","TEXT");Se("elections","positions","TEXT");Se("elections","start_time","DATETIME");Se("elections","end_time","DATETIME");Se("elections","type","TEXT");Se("elections","active_positions","TEXT");Se("elections","session_id","TEXT");Se("votes","session_id","TEXT");Se("votes","election_type","TEXT");Se("votes","timestamp","DATETIME");Se("votes","organization_id","INTEGER");Se("votes","votes","TEXT");try{$.prepare("PRAGMA table_info(votes)").all().some(t=>t.name==="candidate_id"&&t.notnull===1||t.name==="position"&&t.notnull===1||t.name==="voter_id"&&t.notnull===1)&&($.transaction(()=>{$.prepare(`CREATE TABLE IF NOT EXISTS votes_new (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        session_id TEXT,
        election_id INTEGER,
        organization_id INTEGER,
        votes TEXT,
        election_type TEXT,
        timestamp DATETIME,
        voter_id TEXT,
        candidate_id TEXT,
        position TEXT
      )`).run(),$.prepare(`INSERT INTO votes_new (id, session_id, election_id, organization_id, votes, election_type, timestamp, voter_id, candidate_id, position)
        SELECT id, session_id, election_id, organization_id, votes, election_type, timestamp, voter_id, candidate_id, position FROM votes`).run(),$.prepare("DROP TABLE votes").run(),$.prepare("ALTER TABLE votes_new RENAME TO votes").run()})(),console.log("Votes table migrated: candidate_id, position, voter_id are now nullable."))}catch(e){typeof e=="object"&&e!==null&&"message"in e?console.log("Votes table migration failed or not needed:",e.message):console.log("Votes table migration failed or not needed:",e)}P.ipcMain.handle("get-organizations",()=>$.prepare(`
    SELECT o.*, 
      COALESCE((SELECT COUNT(*) FROM elections e WHERE e.organization_id = o.id), 0) as electionCount
    FROM organizations o
  `).all().map(r=>({...r,logo:r.logo||""})));P.ipcMain.handle("create-organization",(e,r)=>{const t=Gr.hashSync(r.password,10);return{id:$.prepare("INSERT INTO organizations (name, logo, password, recovery_phrase) VALUES (?, ?, ?, ?)").run(r.name,r.logo,t,r.recovery_phrase).lastInsertRowid,...r,password:void 0}});P.ipcMain.handle("update-organization",(e,r)=>{const t=r.password&&!r.password.startsWith("$2")?Gr.hashSync(r.password,10):r.password;return $.prepare("UPDATE organizations SET name=?, logo=?, password=?, recovery_phrase=?, updated_at=CURRENT_TIMESTAMP WHERE id=?").run(r.name,r.logo,t,r.recovery_phrase,r.id),{...r,password:void 0}});P.ipcMain.handle("delete-organization",(e,r)=>($.prepare("DELETE FROM organizations WHERE id=?").run(r),r));P.ipcMain.handle("get-elections",(e,r)=>$.prepare("SELECT * FROM elections WHERE organization_id = ? ORDER BY created_at DESC").all(r).map(i=>({...i,positions:i.positions?JSON.parse(i.positions):[],active_positions:i.active_positions?JSON.parse(i.active_positions):[]})));P.ipcMain.handle("create-election",(e,r)=>{try{return{id:$.prepare("INSERT INTO elections (organization_id, name, status, logo, positions, start_time, end_time, type, active_positions, session_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)").run(r.organization_id,r.name,r.status||"Not Started",r.logo||"",JSON.stringify(r.positions||[]),r.start_time||null,r.end_time||null,r.type||null,JSON.stringify(r.active_positions||[]),r.session_id||null).lastInsertRowid,...r,status:r.status||"Not Started",logo:r.logo||"",positions:r.positions||[],start_time:r.start_time||null,end_time:r.end_time||null,type:r.type||null,active_positions:r.active_positions||[],session_id:r.session_id||null}}catch(t){return typeof t=="object"&&t!==null&&"message"in t?console.log("Full insert failed, trying minimal insert:",t.message):console.log("Full insert failed, trying minimal insert:",t),{id:$.prepare("INSERT INTO elections (organization_id, name, status) VALUES (?, ?, ?)").run(r.organization_id,r.name,r.status||"Not Started").lastInsertRowid,...r,status:r.status||"Not Started",logo:"",positions:[],start_time:null,end_time:null,type:null,active_positions:[],session_id:null}}});P.ipcMain.handle("update-election",(e,r)=>{try{$.prepare("UPDATE elections SET name=?, status=?, logo=?, positions=?, start_time=?, end_time=?, type=?, active_positions=?, session_id=?, updated_at=CURRENT_TIMESTAMP WHERE id=?").run(r.name,r.status,r.logo,JSON.stringify(r.positions||[]),r.start_time||null,r.end_time||null,r.type||null,JSON.stringify(r.active_positions||[]),r.session_id||null,r.id)}catch(t){typeof t=="object"&&t!==null&&"message"in t?console.log("Full update failed, trying minimal update:",t.message):console.log("Full update failed, trying minimal update:",t),$.prepare("UPDATE elections SET name=?, status=?, updated_at=CURRENT_TIMESTAMP WHERE id=?").run(r.name,r.status,r.id)}return r});P.ipcMain.handle("delete-election",(e,{orgId:r,electionId:t,password:i})=>{const n=$.prepare("SELECT password FROM organizations WHERE id = ?").get(r);if(!n)throw new Error("Organization not found");if(!Gr.compareSync(i,n.password))throw new Error("Incorrect password");return $.prepare("DELETE FROM elections WHERE id = ? AND organization_id = ?").run(t,r),t});P.ipcMain.handle("authenticate-admin",(e,{orgId:r,password:t})=>{const i=$.prepare("SELECT password FROM organizations WHERE id = ?").get(r);if(!i)throw new Error("Organization not found");if(!Gr.compareSync(t,i.password))throw new Error("Incorrect password");return!0});function Lf(e,r,t){const i=e.replace(/\s/g,"").toUpperCase().substring(0,4).padEnd(4,"X"),n=r.replace(/\s/g,"").toUpperCase().substring(0,4).padEnd(4,"X");let a,o=0;const f=100;do if(a=Math.floor(Math.random()*9e3)+1e3,o++,!$.prepare("SELECT id FROM voters WHERE organization_id = ? AND voter_id LIKE ?").get(t,`${i}-${n}-${a}`))break;while(o<f);return o>=f&&(a=Date.now()%9e3+1e3),`${i}-${n}-${a}`}P.ipcMain.handle("get-voters",(e,r)=>$.prepare("SELECT * FROM voters WHERE organization_id = ? ORDER BY created_at DESC").all(r));P.ipcMain.handle("create-voter",(e,r)=>{const t=$.prepare("SELECT name FROM organizations WHERE id = ?").get(r.organization_id);if(!t)throw new Error("Organization not found");const i=Lf(t.name,r.name,r.organization_id);return{id:$.prepare("INSERT INTO voters (organization_id, name, voter_id) VALUES (?, ?, ?)").run(r.organization_id,r.name,i).lastInsertRowid,organization_id:r.organization_id,name:r.name,voter_id:i}});P.ipcMain.handle("update-voter",(e,r)=>($.prepare("UPDATE voters SET name=?, updated_at=CURRENT_TIMESTAMP WHERE id=?").run(r.name,r.id),r));P.ipcMain.handle("delete-voter",(e,r)=>($.prepare("DELETE FROM voters WHERE id=?").run(r),r));P.ipcMain.handle("batch-create-voters",(e,{organization_id:r,names:t})=>{const i=$.prepare("SELECT name FROM organizations WHERE id = ?").get(r);if(!i)throw new Error("Organization not found");const n=$.prepare("INSERT INTO voters (organization_id, name, voter_id) VALUES (?, ?, ?)"),a=[];for(const o of t){const f=Lf(i.name,o,r),d=n.run(r,o,f);a.push({id:d.lastInsertRowid,organization_id:r,name:o,voter_id:f})}return a});P.ipcMain.handle("get-candidates",(e,{organizationId:r,position:t})=>$.prepare("SELECT * FROM candidates WHERE organization_id = ? AND position = ? ORDER BY created_at DESC").all(r,t));P.ipcMain.handle("create-candidate",(e,r)=>{if($.prepare("SELECT COUNT(*) as cnt FROM candidates WHERE organization_id = ? AND position = ?").get(r.organization_id,r.position).cnt>=10)throw new Error("Maximum of 10 candidates allowed per position.");return{id:$.prepare("INSERT INTO candidates (organization_id, position, name, symbol, photo) VALUES (?, ?, ?, ?, ?)").run(r.organization_id,r.position,r.name,r.symbol,r.photo||null).lastInsertRowid,organization_id:r.organization_id,position:r.position,name:r.name,symbol:r.symbol,photo:r.photo||null}});P.ipcMain.handle("update-candidate",(e,r)=>($.prepare("UPDATE candidates SET name=?, symbol=?, photo=?, position=?, updated_at=CURRENT_TIMESTAMP WHERE id=?").run(r.name,r.symbol,r.photo,r.position,r.id),r));P.ipcMain.handle("delete-candidate",(e,r)=>($.prepare("DELETE FROM candidates WHERE id=?").run(r),r));P.ipcMain.handle("batch-create-candidates",(e,{organization_id:r,position:t,candidates:i})=>{if($.prepare("SELECT COUNT(*) as cnt FROM candidates WHERE organization_id = ? AND position = ?").get(r,t).cnt+i.length>10)throw new Error("Import would exceed the 10 candidate limit per position. Please reduce the number of candidates.");const a=$.prepare("INSERT INTO candidates (organization_id, position, name, symbol, photo) VALUES (?, ?, ?, ?, ?)"),o=[];for(const f of i){const d=a.run(r,t,f.name,f.symbol,f.photo||null);o.push({id:d.lastInsertRowid,organization_id:r,position:t,name:f.name,symbol:f.symbol,photo:f.photo||null})}return o});P.ipcMain.handle("save-votes",(e,r)=>{const t=r.voter_id||"DIRECT",i=r.candidate_id||"DIRECT";return{id:$.prepare("INSERT INTO votes (session_id, election_id, organization_id, votes, election_type, timestamp, voter_id, candidate_id) VALUES (?, ?, ?, ?, ?, ?, ?, ?)").run(r.sessionId,r.electionId,r.orgId,JSON.stringify(r.votes),r.electionType,r.timestamp||new Date().toISOString(),t,i).lastInsertRowid,...r}});P.ipcMain.handle("get-votes",(e,{electionId:r,sessionId:t})=>t&&r?$.prepare("SELECT * FROM votes WHERE session_id = ? AND election_id = ?").all(t,r):t?$.prepare("SELECT * FROM votes WHERE session_id = ?").all(t):$.prepare("SELECT * FROM votes WHERE election_id = ? ORDER BY timestamp DESC").all(r));P.ipcMain.handle("clear-election-votes",(e,{electionId:r})=>($.prepare("DELETE FROM votes WHERE election_id = ?").run(r),!0));let te=null;P.ipcMain.handle("open-voting-window",async(e,{orgId:r,electionId:t,sessionId:i,type:n})=>{if(console.log("Opening voting window",{orgId:r,electionId:t,sessionId:i,type:n}),te&&!te.isDestroyed()){te.focus();return}te=new P.BrowserWindow({fullscreen:!0,alwaysOnTop:!0,frame:!1,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:Re.join(__dirname,"preload.js")},show:!1,skipTaskbar:!0,backgroundColor:"#1a2038"}),te.on("close",o=>{te._forceClose||(o.preventDefault(),te==null||te.focus())});const a=Df?`http://localhost:5177/voting?orgId=${r}&electionId=${t}&sessionId=${i}&type=${n}`:`file://${Re.join(__dirname,"../dist/index.html")}#/voting?orgId=${r}&electionId=${t}&sessionId=${i}&type=${n}`;await te.loadURL(a),te.once("ready-to-show",()=>{te==null||te.show(),te==null||te.focus()})});P.ipcMain.handle("close-voting-window",()=>{console.log("close-voting-window IPC received"),te&&!te.isDestroyed()&&(te._forceClose=!0,te.close(),te.destroy(),te=null)});P.ipcMain.handle("convert-svg-to-image",async(e,{svgDataUrl:r,outputFormat:t,size:i,quality:n})=>new Promise((a,o)=>{try{const f=Re.join(__dirname,"../svg_converter.py"),d=Re.join(__dirname,"../venv/bin/python"),s=[f,r,t,i.toString()];n!==void 0&&s.push(n.toString()),console.log("Running SVG conversion:",{scriptPath:f,pythonPath:d,args:s});const l=Pf.spawn(d,s,{stdio:["pipe","pipe","pipe"]});let g="",u="";l.stdout.on("data",c=>{g+=c.toString()}),l.stderr.on("data",c=>{u+=c.toString()}),l.on("close",c=>{if(c===0)try{const v=JSON.parse(g);v.success&&v.data_url?v.data_url.startsWith("data:image/")?(console.log("SVG conversion successful, data URL length:",v.data_url.length),a(v.data_url)):o(new Error("Invalid data URL format returned")):o(new Error(v.error||"Conversion failed"))}catch{console.error("Failed to parse Python output:",g),o(new Error("Failed to parse Python output"))}else console.error("Python process failed:",{code:c,stderr:u,stdout:g}),o(new Error(`Python process failed with code ${c}: ${u}`))}),l.on("error",c=>{o(new Error(`Failed to start Python process: ${c.message}`))})}catch(f){o(new Error(`SVG conversion setup failed: ${f}`))}}));const F0="https://github.com/AkshayAnuOnline/quikballot/releases/download/v1.0.0/latest.json",z0=P.app.getPath("temp");P.ipcMain.handle("check-for-update",async(e,r,t)=>new Promise((i,n)=>{qa.get(F0,a=>{let o="";a.on("data",f=>o+=f),a.on("end",()=>{try{const f=JSON.parse(o);if(f.version&&f.version!==r){let d="";t==="darwin"?d=f.mac:t==="win32"?d=f.win:t==="linux"&&(d=f.linux),i({updateAvailable:!0,version:f.version,url:d})}else i({updateAvailable:!1})}catch(f){typeof f=="object"&&f!==null&&"message"in f&&console.error("Update check error:",f.message),i({updateAvailable:!1})}})}).on("error",a=>{typeof a=="object"&&a!==null&&"message"in a&&console.error("Update check error:",a.message),i({updateAvailable:!1})})}));P.ipcMain.handle("download-update",async(e,r)=>new Promise((t,i)=>{const n=r.split("/").pop()||"update",a=Re.join(z0,n),o=cn.createWriteStream(a);qa.get(r,f=>{f.pipe(o),o.on("finish",()=>{o.close(()=>t({filePath:a}))})}).on("error",f=>{cn.unlink(a,()=>{}),typeof f=="object"&&f!==null&&"message"in f&&console.error("Download update error:",f.message),i(f)})}));P.ipcMain.handle("open-installer",async(e,r)=>(await P.shell.openPath(r),!0));async function Wa(){const e=process.platform==="win32"?Re.join(__dirname,"../assets/icon.ico"):process.platform==="darwin"?Re.join(__dirname,"../assets/icon.icns"):Re.join(__dirname,"../assets/icon.png");console.log("Platform:",process.platform),console.log("Icon path:",e),console.log("Icon exists:",require("fs").existsSync(e)),console.log("Creating main window...");const r=new P.BrowserWindow({width:1200,height:800,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:Re.join(__dirname,"preload.js")},icon:e,titleBarStyle:"default",show:!0,center:!0});if(r.center(),r.show(),r.focus(),console.log("Main window created and shown."),Df)try{await r.loadURL("http://localhost:5177"),r.webContents.openDevTools();try{await g0(Sf),console.log("React DevTools installed successfully")}catch(t){typeof t=="object"&&t!==null&&"message"in t?console.log("React DevTools installation failed:",t.message):console.log("React DevTools installation failed:",String(t))}}catch(t){typeof t=="object"&&t!==null&&"message"in t?console.error("Failed to load dev server:",t.message):console.error("Failed to load dev server:",String(t)),r.show()}else r.loadFile(Re.join(__dirname,"../dist/index.html"));r.once("ready-to-show",()=>{console.log("Main window ready to show."),r.show(),r.focus()}),setTimeout(()=>{r.isVisible()||(console.log("Forcing main window to show after timeout."),r.show(),r.focus())},3e3),r.on("closed",()=>{console.log("Main window closed.")})}P.app.whenReady().then(()=>{Wa(),P.app.on("activate",function(){P.BrowserWindow.getAllWindows().length===0&&Wa()})});P.app.on("window-all-closed",()=>{process.platform!=="darwin"&&P.app.quit()});
